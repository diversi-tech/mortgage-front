import{a as Qe}from"./chunk-JAQVS44J.js";import{X as Ue,ba as j,d as Pe,e as ze,m as B,o as Je}from"./chunk-6HJZAEU5.js";import{A as fe,C as Ee,Ca as Ae,E as ge,F as d,G as ve,H as Se,I as Ce,Ia as qe,Ja as ke,K as Z,Ka as Me,La as Be,M as ye,Ma as je,N as Ie,P as be,Q as we,R as Fe,S as xe,U as Ge,X as Ne,fb as $e,hb as H,ib as Re,n as k,oa as Le,p as M,pa as Ve,r as Y,sa as Te,ta as Oe}from"./chunk-ILSQ2GZL.js";import{$a as g,Db as r,Eb as t,Fb as q,Jb as P,Mb as f,Ob as z,Tb as J,Tc as De,Ub as U,Uc as _e,Vb as Q,Xb as o,Yb as C,Zb as W,_a as l,_c as he,da as T,f as de,ma as O,na as A,sb as h,ua as D,ub as p,va as _,zb as ce}from"./chunk-DWEHWX46.js";function We(){return e=>{let n=new Date(e.value),E=new Date;return n>E?{invalidBirthDate:!0}:n.getFullYear()>E.getFullYear()?{invalidBirthDate:!0}:null}}function Ye(){return e=>{let n=e.value;return n?/^\d{9}$/.test(n)?Array.from(n,Number).reduce((u,s,i)=>{let m=s*(i%2+1);return u+(m>9?m-9:m)},0)%10!==0?{invalidIsraeliId:!0}:null:{invalidIsraeliId:!0}:null}}var y=function(e){return e[e.Single=0]="Single",e[e.Married=1]="Married",e[e.Divorced=2]="Divorced",e[e.Widowed=3]="Widowed",e}(y||{}),$=function(e){return e[e.Employed=0]="Employed",e[e.SelfEmployed=1]="SelfEmployed",e}($||{}),S=function(e){return e[e.\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF=0]="\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF",e[e.New=1]="New",e[e.Old=2]="Old",e[e.Renovation=3]="Renovation",e[e.Other=4]="Other",e}(S||{}),R=function(e){return e[e.whatup=0]="whatup",e[e.email=1]="email",e}(R||{}),I=function(e){return e[e.l=0]="l",e[e.c=1]="c",e[e.a=2]="a",e}(I||{});var et=["stepper"];function tt(e,n){e&1&&o(0,"\u05D4\u05D2\u05D3\u05E8\u05EA \u05E9\u05DD \u05DE\u05E9\u05EA\u05DE\u05E9 \u05D5\u05E1\u05D9\u05E1\u05DE\u05D0")}function rt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function it(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"),t())}function nt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function ot(e,n){if(e&1&&(r(0,"li",41),o(1),t()),e&2){let E=n.$implicit;l(),W(" ",E," ")}}function ut(e,n){if(e&1&&(r(0,"li",42),o(1),t()),e&2){let E=n.$implicit;l(),W(" ",E," ")}}function at(e,n){if(e&1&&(r(0,"div")(1,"p"),o(2,"\u05D3\u05E8\u05D9\u05E9\u05D5\u05EA \u05DC\u05E1\u05D9\u05E1\u05DE\u05D4 \u05D7\u05D6\u05E7\u05D4:"),t(),r(3,"ul"),h(4,ot,2,1,"li",39)(5,ut,2,1,"li",40),t()()),e&2){let E=z();l(4),p("ngForOf",E.passwordStrength.valid),l(),p("ngForOf",E.passwordStrength.invalid)}}function st(e,n){e&1&&o(0,"\u05E2\u05D3\u05DB\u05D5\u05DF \u05E4\u05E8\u05D8\u05D9\u05DD \u05D0\u05D9\u05E9\u05D9\u05D9\u05DD")}function mt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function lt(e,n){e&1&&(r(0,"mat-error"),o(1," \u05D9\u05E9 \u05DC\u05DB\u05EA\u05D5\u05D1 \u05D1\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05E8\u05E7 \u05D0\u05D5\u05EA\u05D9\u05D5\u05EA "),t())}function pt(e,n){if(e&1&&(r(0,"mat-option",43),o(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function dt(e,n){if(e&1&&(r(0,"mat-option",43),o(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function ct(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Dt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function _t(e,n){if(e&1&&(r(0,"mat-option",43),o(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function ht(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function ft(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Et(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function gt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function vt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E7\u05E6\u05D1\u05D0\u05D5\u05EA \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function St(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05DE\u05D6\u05D5\u05E0\u05D5\u05EA \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Ct(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E2\u05D5\u05D3 \u05DE\u05E7\u05D5\u05E8 \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function yt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function It(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function bt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function wt(e,n){e&1&&o(0,"\u05E4\u05E8\u05D8\u05D9 \u05D4\u05E0\u05DB\u05E1")}function Ft(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function xt(e,n){if(e&1){let E=P();r(0,"mat-option",44),f("click",function(){let s=D(E).$implicit,i=z();return _(i.saveSelectionType(s.value))}),o(1),t()}if(e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function Gt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Nt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05E8\u05E7 \u05E1\u05E4\u05E8\u05D5\u05EA"),t())}function Lt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Vt(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05E8\u05E7 \u05E1\u05E4\u05E8\u05D5\u05EA"),t())}function Tt(e,n){if(e&1&&(r(0,"mat-option",43),o(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function Ot(e,n){e&1&&(r(0,"mat-error"),o(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function At(e,n){e&1&&o(0,"\u05D4\u05E2\u05DC\u05D0\u05EA \u05DE\u05E1\u05DE\u05DB\u05D9\u05DD")}function qt(e,n){e&1&&q(0,"documents-list-customer")}var X=(()=>{let n=class n{constructor(u,s,i,m,c,a,b,w,F){this.loginservice=u,this.route=s,this.router=i,this._formBuilder=m,this.customerService=c,this.leadService=a,this.userService=b,this.documentType=w,this.customerTasks=F,this.user={id:0,userName:"",password:"",email:"",role:H.Customer,created_at:new Date(Date.now()),updated_at:new Date(Date.now())},this.currentStepIndex=0,this.isCustomer=!1,this.isLead=!1,this.isLinear=!0,this.isAddDocuments=!1,this.res="",this.lead_id=null,this.isDocsAdded=!1,this.uploadedFiles=[],this.showTable=!1,this.tableData=[],this.document={id:0,customer_Id:0,task_description:"",document_type_id:0,document_path:"",document_path2:"",status:0,status2:0,due_date:new Date(Date.now()),created_at:new Date(Date.now()),id2:0,updated_at:new Date(Date.now())},this.customerData={id:0,lead_id:this.lead_id,last_Name:"",first_Name:"",email:"",phone:"",connection:0,t_z:"",birthDate:new Date(Date.now()),family_status:0,number_of_people_in_house:0,address:"",job_status:0,customer_type:0,work_business_name:"",job_description:"",avarage_monthly_salary:0,years_in_current_position:0,income_rent:0,income_Government_Endorsement:0,income_other:0,expenses_rent:0,expenses_loans:0,expenses_other:0,property_city:"",transaction_type:0,estimated_price_by_customer:0,estimated_price_by_sales_agreement:0,has_other_properties:!1,amount_of_loan_requested:0,lastSynced:new Date(Date.now()),isArchived:!1,created_at:new Date(Date.now()),updated_at:new Date(Date.now()),userId:0},this.familyStatusOptions=[{value:y.Single,label:"\u05E8\u05D5\u05D5\u05E7"},{value:y.Married,label:"\u05E0\u05E9\u05D5\u05D9"},{value:y.Divorced,label:"\u05D2\u05E8\u05D5\u05E9"},{value:y.Widowed,label:"\u05D0\u05DC\u05DE\u05DF"}],this.jobStatusOptions=[{value:$.Employed,label:"\u05E9\u05DB\u05D9\u05E8"},{value:$.SelfEmployed,label:"\u05E2\u05E6\u05DE\u05D0\u05D9"}],this.transactiontypeOptions=[{value:S.\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF,label:"\u05DE\u05D7\u05D9\u05E8 \u05DC\u05DE\u05E9\u05EA\u05DB\u05DF"},{value:S.New,label:"\u05D9\u05D3 \u05E8\u05D0\u05E9\u05D5\u05E0\u05D4"},{value:S.Old,label:"\u05D9\u05D3 \u05E9\u05E0\u05D9\u05D4"},{value:S.Renovation,label:"\u05E9\u05D9\u05E4\u05D5\u05E6\u05D9\u05DD"},{value:S.Other,label:"\u05DC\u05DB\u05DC \u05DE\u05D8\u05E8\u05D4"}],this.connectionOptions=[{value:R.whatup,label:"\u05D5\u05D5\u05D0\u05E6\u05D0\u05E4"},{value:R.email,label:"\u05DE\u05D9\u05D9\u05DC"}],this.hasOtherProperties=[{value:!0,label:"\u05DB\u05DF"},{value:!1,label:"\u05DC\u05D0"}],this.passwordStrength={valid:[],invalid:[]},this.displayDocuments=!1,this.passwordStrengthValidator=x=>{let v=x.value,G=/[A-Z]/.test(v),N=/[a-z]/.test(v),L=/[0-9]/.test(v),V=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(v);return this.passwordStrength.valid=[],this.passwordStrength.invalid=[],v.length>=10?this.passwordStrength.valid.push("\u05D0\u05D5\u05E8\u05DA 10 \u05EA\u05D5\u05D5\u05D9\u05DD \u05DC\u05E4\u05D7\u05D5\u05EA"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05E8\u05DA 10 \u05EA\u05D5\u05D5\u05D9\u05DD \u05DC\u05E4\u05D7\u05D5\u05EA"),G?this.passwordStrength.valid.push("\u05D0\u05D5\u05EA \u05D2\u05D3\u05D5\u05DC\u05D4"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05EA \u05D2\u05D3\u05D5\u05DC\u05D4"),N?this.passwordStrength.valid.push("\u05D0\u05D5\u05EA \u05E7\u05D8\u05E0\u05D4"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05EA \u05E7\u05D8\u05E0\u05D4"),L?this.passwordStrength.valid.push("\u05DE\u05E1\u05E4\u05E8"):this.passwordStrength.invalid.push("\u05DE\u05E1\u05E4\u05E8"),V?this.passwordStrength.valid.push("\u05EA\u05D5 \u05DE\u05D9\u05D5\u05D7\u05D3"):this.passwordStrength.invalid.push("\u05EA\u05D5 \u05DE\u05D9\u05D5\u05D7\u05D3"),this.passwordStrength.invalid.length===0?null:{passwordStrength:!0}},this.firstFormGroup=new Ce({userName:new Z({value:"enter mail",disabled:!1},[d.required,d.email]),password:new Z({value:"enter password",disabled:!1},[d.required,d.minLength(10),this.passwordStrengthValidator])}),this.secondFormGroup=this._formBuilder.group({last_Name:["",[d.pattern("^[a-zA-Z\u05D0-\u05EA ]*$"),d.required]],first_Name:[""],email:[""],phone:[""],connection:[""],t_z:["",[d.required,Ye()]],birthDate:["",[d.required,We()]],family_status:["",d.required],number_of_people_in_house:["",[d.pattern("^[0-9]*$"),d.required]],address:["",d.required],job_status:[""],customer_type:[""],work_business_name:["",d.required],job_description:["",d.required],avarage_monthly_salary:["",[d.pattern("^[0-9]*$"),d.required]],years_in_current_position:["",[d.pattern("^[0-9]*$"),d.required]],income_rent:["",[d.pattern("^[0-9]*$"),d.required]],income_Government_Endorsement:["",[d.pattern("^[0-9]*$"),d.required]],income_other:["",[d.pattern("^[0-9]*$"),d.required]],expenses_rent:["",[d.pattern("^[0-9]*$"),d.required]],expenses_loans:["",[d.pattern("^[0-9]*$"),d.required]],expenses_other:["",d.required]}),this.thirdFormGroup=this._formBuilder.group({property_city:["",d.required],transaction_type:["",d.required],estimated_price_by_customer:["",[d.pattern("^[0-9]*$"),d.required]],estimated_price_by_sales_agreement:["",[d.pattern("^[0-9]*$"),d.required]],has_other_properties:["",d.required],amount_of_loan_requested:["",[d.pattern("^[0-9]*$"),d.required]],userId:[""]}),this.fourthFormGroup=this._formBuilder.group({documents:["",d.required]})}ngOnInit(){this.route.paramMap.subscribe(c=>{this.lead_id=Number(c.get("id")),console.log("in ng oninit id=",this.lead_id),sessionStorage.setItem("lead_id",this.lead_id+"")}),localStorage.getItem("enterOrNot")===null&&localStorage.setItem("enterOrNot","false");let u=localStorage.getItem("userName"),s=localStorage.getItem("password");u!==null&&s!==null&&(this.firstFormGroup.setValue({userName:JSON.parse(u),password:JSON.parse(s)}),this.firstFormGroup.get("userName")?.disable(),this.firstFormGroup.get("password")?.disable()),this.customerId=+localStorage.getItem("customerId"),this.lead_id=+localStorage.getItem("lead_id"),this.userId=+localStorage.getItem("userId"),this.customerData.id=this.customerId,this.customerData.lead_id=this.lead_id,this.customerData.userId=this.userId;let i=localStorage.getItem("currentStep");i!==null&&(this.currentStepIndex=parseInt(i,10));let m=localStorage.getItem("tableData");m&&(this.tableData=JSON.parse(m)),this.loadFormData()}onStepChange(u){this.currentStepIndex=u.selectedIndex,localStorage.setItem("currentStep",this.currentStepIndex.toString())}ngAfterViewInit(){this.loadCurrentStep()}isReturningUser(){return localStorage.getItem("enterOrNot")==="true"}checkUserNameAndPassword(){if(console.log("id========"+this.lead_id),this.lead_id=+sessionStorage.getItem("lead_id"),this.leadService.getLeadById(this.lead_id).subscribe(u=>{u&&(this.customerData.phone=u.phone,this.customerData.email=u.email,this.customerData.first_Name=u.first_Name,this.secondFormGroup.value.phone=this.customerData.phone,this.secondFormGroup.value.email=this.customerData.email,this.secondFormGroup.value.first_Name=this.customerData.first_Name)}),localStorage.getItem("enterOrNot")=="true"){this.stepper.next();return}this.user.id=0,this.user.userName=this.firstFormGroup.value.userName,this.user.password=this.firstFormGroup.value.password,this.user.email=this.firstFormGroup.value.userName,this.user.role=H.Customer,this.user.created_at=new Date(Date.now()),this.user.updated_at=new Date(Date.now()),this.userService.IsExist(this.user).subscribe(u=>{localStorage.setItem("userName",JSON.stringify(this.user.userName)),localStorage.setItem("password",JSON.stringify(this.user.password)),this.res=u,u==="200"?localStorage.getItem("enterOrNot")==="true"?this.stepper.next():alert("\u05D0\u05D9\u05D9\u05DE\u05D9\u05DC \u05D0\u05D5 \u05E1\u05D9\u05E1\u05DE\u05D0 \u05EA\u05E4\u05D5\u05E1\u05D9\u05DD \u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05D0\u05D7\u05E8"):u==="404"&&this.user!==null&&this.user!==void 0&&this.user.password!==""&&this.user.userName!==""?(localStorage.setItem("enterOrNot","true"),this.stepper.next(),this.userService.createUserForLead(this.user,this.lead_id).subscribe({next:s=>{console.log("User created:",this.user),this.customerData.lead_id=this.lead_id,this.customerData.userId=s.id,console.log("customerData=====",this.customerData.id),this.secondFormGroup.value.userId=s.id,this.customerService.createCustomerForLead(this.customerData,this.lead_id).subscribe({next:i=>{this.customerId=i.id,localStorage.setItem("customerId",this.customerId+""),localStorage.setItem("lead_id",this.lead_id+""),localStorage.setItem("userId",this.userId+""),this.customerData.customer_type=I.c,this.customerData.id=i.id,this.secondFormGroup.value.customer_type=I.c,console.log("Customer created:",this.customerData),this.loginservice.login(this.user.email,this.user.password).subscribe(m=>{let c=JSON.parse(m);sessionStorage.setItem("token",c.token),console.log("customerid=",this.loginservice.GetCurrentUser().customerId)},m=>{console.log("Login failed",m)})},error:i=>console.error("Error creating customer:",i)})},error:s=>console.error("Error creating user:",s)})):console.error("Unexpected response:",u)},u=>{console.error("Error during user existence check:",u)})}saveFormData(){let u={firstFormGroup:this.firstFormGroup.value,secondFormGroup:this.secondFormGroup.value,thirdFormGroup:this.thirdFormGroup.value,fourthFormGroup:this.fourthFormGroup.value,uploadedFiles:this.uploadedFiles};localStorage.setItem("formData",JSON.stringify(u))}saveCurrentStep(){localStorage.setItem("currentStep",JSON.stringify(this.stepper.selectedIndex))}loadCurrentStep(){let u=localStorage.getItem("currentStep");u&&(this.stepper.selectedIndex=JSON.parse(u))}loadFormData(){let u=localStorage.getItem("formData");if(u){let i=JSON.parse(u);console.log("data",i),this.firstFormGroup.patchValue(i.firstFormGroup),this.secondFormGroup.patchValue(i.secondFormGroup),this.thirdFormGroup.patchValue(i.thirdFormGroup),this.fourthFormGroup.patchValue(i.fourthFormGroup),this.uploadedFiles=i.uploadedFiles||[],this.customerData.last_Name=this.secondFormGroup.value.last_Name,this.customerData.first_Name=this.secondFormGroup.value.first_Name,this.customerData.email=this.secondFormGroup.value.email,this.customerData.phone=this.secondFormGroup.value.phone,this.customerData.connection=this.secondFormGroup.value.connection.toISOString,this.customerData.t_z=this.secondFormGroup.value.t_z,this.customerData.birthDate=this.secondFormGroup.value.birthDate,this.customerData.family_status=this.secondFormGroup.value.family_status.toISOString,this.customerData.number_of_people_in_house=this.secondFormGroup.value.number_of_people_in_house.toISOString,this.customerData.address=this.secondFormGroup.value.address,this.customerData.job_status=this.secondFormGroup.value.job_status.toISOString,this.customerData.customer_type=this.secondFormGroup.value.customer_type.toISOString,this.customerData.work_business_name=this.secondFormGroup.value.work_business_name,this.customerData.job_description=this.secondFormGroup.value.job_description,this.customerData.avarage_monthly_salary=this.secondFormGroup.value.avarage_monthly_salary.toISOString,this.customerData.years_in_current_position=this.secondFormGroup.value.years_in_current_position.toISOString,this.customerData.income_rent=this.secondFormGroup.value.income_rent.toISOString,this.customerData.income_Government_Endorsement=this.secondFormGroup.value.income_Government_Endorsement.toISOString,this.customerData.income_other=this.secondFormGroup.value.income_other.toISOString,this.customerData.expenses_rent=this.secondFormGroup.value.expenses_rent,this.customerData.expenses_loans=this.secondFormGroup.value.expenses_loans,this.customerData.expenses_other=this.secondFormGroup.value.expenses_other,this.customerData.property_city=this.thirdFormGroup.value.property_city,this.customerData.transaction_type=this.thirdFormGroup.value.transaction_type,this.customerData.estimated_price_by_customer=this.thirdFormGroup.value.estimated_price_by_customer.toISOString,this.customerData.estimated_price_by_sales_agreement=this.thirdFormGroup.value.estimated_price_by_sales_agreement.toISOString,this.customerData.has_other_properties=this.thirdFormGroup.value.has_other_properties.toISOString,this.customerData.amount_of_loan_requested=this.thirdFormGroup.value.amount_of_loan_requested.toISOString,this.customerData.isArchived=this.thirdFormGroup.value.isArchived,this.customerData.userId=this.thirdFormGroup.value.userId}console.log("customerData",this.customerData);let s=localStorage.getItem("customerData")}onInputChange(u,s){let i=s.target.value;this.customerData[u]=i,this.saveFormData()}onSelectionChange(u,s){u=="family_status"?(this.customerData[u]=s,this.customerData.family_status=Number(this.customerData.family_status)):u=="job_status"?(this.customerData[u]=s,this.customerData.job_status=Number(this.customerData.job_status)):u=="transaction_type"?(this.customerData[u]=s,this.customerData.transaction_type=Number(this.customerData.transaction_type)):u=="has_other_properties"?(this.customerData[u]=s,this.customerData.has_other_properties=this.customerData.has_other_properties,s===!0?this.customerData[u]=!0:this.customerData[u]=!1):u=="connection"?(this.customerData[u]=s,this.customerData.connection=Number(this.customerData.connection)):this.customerData[u]=s,this.saveFormData()}saveSelectionType(u){localStorage.setItem("tableData",JSON.stringify(this.tableData))}save(){try{this.customerService.updateCustomer(this.customerId,this.customerData).subscribe(()=>{localStorage.getItem("isAddDocuments")!=="true"&&this.getDocsByTransactionTypeAndAddTasks()})}catch(u){console.error("Error in the process",u)}}saveSecondStep(){try{this.customerData.customer_type=I.l,this.customerService.updateCustomer(this.customerId,this.customerData).subscribe(()=>{console.log("saved second step")})}catch(u){console.error("Error in the process",u)}}removeStorage(){console.log("step 4 created"),localStorage.removeItem("enterOrNot"),localStorage.removeItem("formData"),localStorage.removeItem("currentStep"),localStorage.removeItem("ifEnter"),localStorage.removeItem("currentStepIndex"),localStorage.removeItem("tableData"),localStorage.removeItem("isAddDocuments"),localStorage.removeItem("customerId"),localStorage.removeItem("lead_id"),localStorage.removeItem("username"),localStorage.removeItem("password"),this.router.navigate(["auth/login"])}getDocsByTransactionTypeAndAddTasks(){let u=Number(this.customerData.transaction_type);console.log("in getDocsByTransactionTypeAndAddTasks num=",u),this.documentType.getDocsByTransactionType(u).subscribe(s=>{this.tableData=s,localStorage.setItem("tableData",JSON.stringify(this.tableData)),console.log("in getDocsByTransactionTypeAndAddTasks, res=",s),this.addToCustomerTask(),this.stepper.next()},s=>{console.error("Error fetching documents:",s)})}addToCustomerTask(){return de(this,null,function*(){let u=this.tableData.map(s=>({id:0,id2:0,customer_Id:this.customerData.id,task_description:s.document_Name,document_type_id:Number(this.customerData.transaction_type),document_path:"",document_path2:"",status:0,status2:0,due_date:new Date(Date.now()),created_at:new Date(Date.now()),updated_at:new Date(Date.now())}));this.customerTasks.addDocuments(u).subscribe({next:s=>{console.log("Successfully added documents to customerTask"),this.isDocsAdded=!0,this.displayDocuments=!0,localStorage.setItem("isAddDocuments","true")},error:s=>{console.log("Failed to add documents to CustomerTask")}})})}};n.\u0275fac=function(s){return new(s||n)(g(Re),g(k),g(M),g(xe),g(Pe),g(B),g(Je),g(Ue),g(ze))},n.\u0275cmp=O({type:n,selectors:[["app-lead"]],viewQuery:function(s,i){if(s&1&&(J(j,5),J(et,5)),s&2){let m;U(m=Q())&&(i.documentsListCustomer=m.first),U(m=Q())&&(i.stepper=m.first)}},decls:177,vars:40,consts:[["stepper",""],["myButton",""],["dir","rtl",3,"selectionChange","linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["matInput","","formControlName","userName","required",""],[4,"ngIf"],["matInput","","formControlName","password","type","password","required",""],["mat-button","",3,"click","disabled"],["matInput","","formControlName","last_Name",3,"input"],["matInput","","type","number","formControlName","connection",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","t_z",3,"input"],["matInput","","formControlName","birthDate","type","date",3,"input"],["formControlName","family_status",3,"selectionChange"],["matInput","","formControlName","number_of_people_in_house","type","number",3,"input"],["matInput","","formControlName","address","type","text",3,"input"],["formControlName","job_status",3,"selectionChange"],["matInput","","formControlName","work_business_name","type","text",3,"input"],["matInput","","formControlName","job_description","type","text",3,"input"],["matInput","","formControlName","avarage_monthly_salary","type","number",3,"input"],["matInput","","formControlName","years_in_current_position","type","number",3,"input"],["matInput","","formControlName","income_rent","type","number",3,"input"],["matInput","","formControlName","income_Government_Endorsement","type","number",3,"input"],["matInput","","formControlName","income_other","type","number",3,"input"],["matInput","","formControlName","expenses_rent","type","number",3,"input"],["matInput","","formControlName","expenses_loans","type","number",3,"input"],["matInput","","formControlName","expenses_other","type","number",3,"input"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext","",3,"click"],["matInput","","formControlName","property_city","type","text",3,"input"],["formControlName","transaction_type",3,"selectionChange"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","formControlName","estimated_price_by_customer","type","number",3,"input"],["matInput","","formControlName","estimated_price_by_sales_agreement","type","text",3,"input"],["formControlName","has_other_properties",3,"selectionChange"],["matInput","","formControlName","amount_of_loan_requested","type","number",3,"input"],["mat-button","",3,"click"],["style","color: green;",4,"ngFor","ngForOf"],["style","color: red;",4,"ngFor","ngForOf"],[2,"color","green"],[2,"color","red"],[3,"value"],[3,"click","value"]],template:function(s,i){if(s&1){let m=P();r(0,"mat-horizontal-stepper",2,0),f("selectionChange",function(a){return D(m),_(i.onStepChange(a))}),r(2,"mat-step",3)(3,"form",4),h(4,tt,1,0,"ng-template",5),r(5,"mat-form-field")(6,"mat-label"),o(7,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC"),t(),q(8,"input",6),h(9,rt,2,0,"mat-error",7)(10,it,2,0,"mat-error",7),t(),r(11,"mat-form-field")(12,"mat-label"),o(13,"\u05E1\u05D9\u05E1\u05DE\u05D0"),t(),q(14,"input",8),h(15,nt,2,0,"mat-error",7),t(),h(16,at,6,2,"div",7),r(17,"div")(18,"button",9,1),f("click",function(){return D(m),_(i.checkUserNameAndPassword())}),o(20,"\u05D4\u05D1\u05D0"),t()()()(),r(21,"mat-step",3)(22,"form",4),h(23,st,1,0,"ng-template",5),r(24,"mat-form-field")(25,"mat-label"),o(26,"\u05E9\u05DD \u05DE\u05E9\u05E4\u05D7\u05D4"),t(),r(27,"input",10),f("input",function(a){return D(m),_(i.onInputChange("last_Name",a))}),t(),h(28,mt,2,0,"mat-error",7)(29,lt,2,0,"mat-error",7),t(),r(30,"mat-form-field")(31,"mat-label"),o(32,"\u05D7\u05D9\u05D1\u05D5\u05E8"),t(),r(33,"mat-select",11),f("selectionChange",function(a){return D(m),_(i.onSelectionChange("connection",a.value))}),h(34,pt,2,2,"mat-option",12),t()(),r(35,"mat-form-field")(36,"mat-label"),o(37,"\u05EA.\u05D6."),t(),r(38,"input",13),f("input",function(a){return D(m),_(i.onInputChange("t_z",a))}),t(),r(39,"mat-error"),o(40," \u05DE\u05E1\u05E4\u05E8 \u05EA\u05E2\u05D5\u05D3\u05EA \u05D6\u05D4\u05D5\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF "),t()(),r(41,"mat-form-field")(42,"mat-label"),o(43,"\u05EA\u05D0\u05E8\u05D9\u05DA \u05DC\u05D9\u05D3\u05D4"),t(),r(44,"input",14),f("input",function(a){return D(m),_(i.onInputChange("birthDate",a))}),t(),r(45,"mat-error"),o(46," \u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05EA\u05D0\u05E8\u05D9\u05DA \u05EA\u05E7\u05D9\u05DF \u05E2\u05D3 \u05DC\u05EA\u05D0\u05E8\u05D9\u05DA \u05D4\u05E0\u05D5\u05DB\u05D7\u05D9 "),t()(),r(47,"mat-form-field")(48,"mat-label"),o(49,"\u05DE\u05E6\u05D1 \u05DE\u05E9\u05E4\u05D7\u05EA\u05D9"),t(),r(50,"mat-select",15),f("selectionChange",function(a){return D(m),_(i.onSelectionChange("family_status",a.value))}),h(51,dt,2,2,"mat-option",12),t()(),r(52,"mat-form-field")(53,"mat-label"),o(54,"\u05DE\u05E1\u05E4\u05E8 \u05D0\u05E0\u05E9\u05D9\u05DD \u05D1\u05D1\u05D9\u05EA"),t(),r(55,"input",16),f("input",function(a){return D(m),_(i.onInputChange("number_of_people_in_house",a))}),t(),h(56,ct,2,0,"mat-error",7),t(),r(57,"mat-form-field")(58,"mat-label"),o(59,"\u05DB\u05EA\u05D5\u05D1\u05EA"),t(),r(60,"input",17),f("input",function(a){return D(m),_(i.onInputChange("address",a))}),t(),h(61,Dt,2,0,"mat-error",7),t(),r(62,"h3"),o(63,"\u05E4\u05E8\u05D8\u05D9 \u05EA\u05E2\u05E1\u05D5\u05E7\u05D4"),t(),r(64,"mat-form-field")(65,"mat-label"),o(66,"\u05E1\u05D8\u05D8\u05D5\u05E1"),t(),r(67,"mat-select",18),f("selectionChange",function(a){return D(m),_(i.onSelectionChange("job_status",a.value))}),h(68,_t,2,2,"mat-option",12),t()(),r(69,"mat-form-field")(70,"mat-label"),o(71,"\u05DE\u05E7\u05D5\u05DD \u05E2\u05D1\u05D5\u05D3\u05D4"),t(),r(72,"input",19),f("input",function(a){return D(m),_(i.onInputChange("work_business_name",a))}),t(),h(73,ht,2,0,"mat-error",7),t(),r(74,"mat-form-field")(75,"mat-label"),o(76,"\u05EA\u05E4\u05E7\u05D9\u05D3"),t(),r(77,"input",20),f("input",function(a){return D(m),_(i.onInputChange("job_description",a))}),t(),h(78,ft,2,0,"mat-error",7),t(),r(79,"mat-form-field")(80,"mat-label"),o(81,"\u05DE\u05E9\u05DB\u05D5\u05E8\u05EA \u05D7\u05D5\u05D3\u05E9\u05D9\u05EA \u05DE\u05DE\u05D5\u05E6\u05E2\u05EA \u05E0\u05D8\u05D5"),t(),r(82,"input",21),f("input",function(a){return D(m),_(i.onInputChange("avarage_monthly_salary",a))}),t(),h(83,Et,2,0,"mat-error",7),t(),r(84,"mat-form-field")(85,"mat-label"),o(86,"\u05D5\u05EA\u05E7"),t(),r(87,"input",22),f("input",function(a){return D(m),_(i.onInputChange("years_in_current_position",a))}),t(),h(88,gt,2,0,"mat-error",7),t(),r(89,"h3"),o(90,"\u05D4\u05DB\u05E0\u05E1\u05D5\u05EA"),t(),r(91,"mat-form-field")(92,"mat-label"),o(93,"\u05E7\u05E6\u05D1\u05D0\u05D5\u05EA"),t(),r(94,"input",23),f("input",function(a){return D(m),_(i.onInputChange("income_rent",a))}),t(),h(95,vt,2,0,"mat-error",7),t(),r(96,"mat-form-field")(97,"mat-label"),o(98,"\u05DE\u05D6\u05D5\u05E0\u05D5\u05EA"),t(),r(99,"input",24),f("input",function(a){return D(m),_(i.onInputChange("income_Government_Endorsement",a))}),t(),h(100,St,2,0,"mat-error",7),t(),r(101,"mat-form-field")(102,"mat-label"),o(103,"\u05DE\u05E7\u05D5\u05E8 \u05D0\u05D7\u05E8"),t(),r(104,"input",25),f("input",function(a){return D(m),_(i.onInputChange("income_other",a))}),t(),h(105,Ct,2,0,"mat-error",7),t(),r(106,"h3"),o(107,"\u05D4\u05D5\u05E6\u05D0\u05D5\u05EA"),t(),r(108,"mat-form-field")(109,"mat-label"),o(110,"\u05E9\u05DB\u05E8 \u05D3\u05D9\u05E8\u05D4"),t(),r(111,"input",26),f("input",function(a){return D(m),_(i.onInputChange("expenses_rent",a))}),t(),h(112,yt,2,0,"mat-error",7),t(),r(113,"mat-form-field")(114,"mat-label"),o(115,"\u05D4\u05DC\u05D5\u05D5\u05D0\u05D5\u05EA"),t(),r(116,"input",27),f("input",function(a){return D(m),_(i.onInputChange("expenses_loans",a))}),t(),h(117,It,2,0,"mat-error",7),t(),r(118,"mat-form-field")(119,"mat-label"),o(120,"\u05DE\u05E7\u05D5\u05E8 \u05D0\u05D7\u05E8"),t(),r(121,"input",28),f("input",function(a){return D(m),_(i.onInputChange("expenses_other",a))}),t(),h(122,bt,2,0,"mat-error",7),t(),r(123,"div")(124,"button",29),o(125,"\u05D7\u05D6\u05D5\u05E8"),t(),r(126,"button",30),f("click",function(){return D(m),_(i.saveSecondStep())}),o(127,"\u05D4\u05D1\u05D0"),t()()()(),r(128,"mat-step",3)(129,"form",4),h(130,wt,1,0,"ng-template",5),r(131,"mat-form-field")(132,"mat-label"),o(133,"\u05D9\u05D9\u05E9\u05D5\u05D1"),t(),r(134,"input",31),f("input",function(a){return D(m),_(i.onInputChange("property_city",a))}),t(),h(135,Ft,2,0,"mat-error",7),t(),r(136,"mat-form-field")(137,"mat-label"),o(138,"\u05E1\u05D5\u05D2 \u05E2\u05E1\u05E7\u05D4"),t(),r(139,"mat-select",32),f("selectionChange",function(a){return D(m),_(i.onSelectionChange("transaction_type",a.value))}),h(140,xt,2,2,"mat-option",33),t()(),r(141,"mat-form-field")(142,"mat-label"),o(143,"\u05E9\u05D5\u05D5\u05D9 \u05D4\u05E0\u05DB\u05E1 \u05DC\u05E4\u05D9 \u05D4\u05E2\u05E8\u05DB\u05EA \u05DC\u05D5\u05D5\u05D4"),t(),r(144,"input",34),f("input",function(a){return D(m),_(i.onInputChange("estimated_price_by_customer",a))}),t(),h(145,Gt,2,0,"mat-error",7)(146,Nt,2,0,"mat-error",7),t(),r(147,"mat-form-field")(148,"mat-label"),o(149,"\u05E9\u05D5\u05D5\u05D4 \u05D4\u05E0\u05DB\u05E1 \u05DC\u05E4\u05D9 \u05D4\u05E1\u05DB\u05DD \u05DE\u05DB\u05E8"),t(),r(150,"input",35),f("input",function(a){return D(m),_(i.onInputChange("estimated_price_by_sales_agreement",a))}),t(),h(151,Lt,2,0,"mat-error",7)(152,Vt,2,0,"mat-error",7),t(),r(153,"mat-form-field")(154,"mat-label"),o(155,"\u05D9\u05E9 \u05E0\u05DB\u05E1\u05D9\u05DD \u05E0\u05D5\u05E1\u05E4\u05D9\u05DD \u05DC\u05DC\u05D5\u05D5\u05D4"),t(),r(156,"mat-select",36),f("selectionChange",function(a){return D(m),_(i.onSelectionChange("has_other_properties",a.value))}),h(157,Tt,2,2,"mat-option",12),t()(),r(158,"mat-form-field")(159,"mat-label"),o(160,"\u05E1\u05DB\u05D5\u05DD \u05D4\u05D4\u05DC\u05D5\u05D5\u05D0\u05D4"),t(),r(161,"input",37),f("input",function(a){return D(m),_(i.onInputChange("amount_of_loan_requested",a))}),t(),h(162,Ot,2,0,"mat-error",7),t(),r(163,"div")(164,"button",29),o(165,"\u05D7\u05D6\u05D5\u05E8"),t(),r(166,"button",38),f("click",function(){return D(m),_(i.save())}),o(167,"\u05D4\u05D1\u05D0"),t()()()(),r(168,"mat-step",3)(169,"form",4),h(170,At,1,0,"ng-template",5)(171,qt,1,0,"documents-list-customer"),r(172,"div")(173,"button",29),o(174,"\u05D7\u05D6\u05D5\u05E8"),t(),r(175,"button",38),f("click",function(){return D(m),_(i.removeStorage())}),o(176,"\u05E9\u05DE\u05D5\u05E8"),t()()()()()}if(s&2){let m,c,a,b,w,F,x,v,G,N,L,V,ee,te,re,ie,ne,oe,ue,ae,se,me,le,pe;p("linear",i.isLinear),l(2),p("stepControl",i.firstFormGroup),l(),p("formGroup",i.firstFormGroup),l(6),p("ngIf",(m=i.firstFormGroup.get("userName"))==null?null:m.hasError("required")),l(),p("ngIf",(c=i.firstFormGroup.get("userName"))==null?null:c.hasError("email")),l(5),p("ngIf",(a=i.firstFormGroup.get("password"))==null?null:a.hasError("required")),l(),p("ngIf",(b=i.firstFormGroup.get("password"))==null?null:b.touched),l(2),p("disabled",i.firstFormGroup.invalid),l(3),p("stepControl",i.secondFormGroup),l(),p("formGroup",i.secondFormGroup),l(6),p("ngIf",(w=i.secondFormGroup.get("last_Name"))==null?null:w.hasError("required")),l(),p("ngIf",(F=i.secondFormGroup.get("last_Name"))==null?null:F.hasError("pattern")),l(5),p("ngForOf",i.connectionOptions),l(17),p("ngForOf",i.familyStatusOptions),l(5),p("ngIf",(x=i.secondFormGroup.get("number_of_people_in_house"))==null?null:x.hasError("required")),l(5),p("ngIf",(v=i.secondFormGroup.get("address"))==null?null:v.hasError("required")),l(7),p("ngForOf",i.jobStatusOptions),l(5),p("ngIf",(G=i.secondFormGroup.get("work_business_name"))==null?null:G.hasError("required")),l(5),p("ngIf",(N=i.secondFormGroup.get("job_description"))==null?null:N.hasError("required")),l(5),p("ngIf",(L=i.secondFormGroup.get("avarage_monthly_salary"))==null?null:L.hasError("required")),l(5),p("ngIf",(V=i.secondFormGroup.get("years_in_current_position"))==null?null:V.hasError("required")),l(7),p("ngIf",(ee=i.secondFormGroup.get("income_rent"))==null?null:ee.hasError("required")),l(5),p("ngIf",(te=i.secondFormGroup.get("income_Government_Endorsement"))==null?null:te.hasError("required")),l(5),p("ngIf",(re=i.secondFormGroup.get("income_other"))==null?null:re.hasError("required")),l(7),p("ngIf",(ie=i.secondFormGroup.get("expenses_rent"))==null?null:ie.hasError("required")),l(5),p("ngIf",(ne=i.secondFormGroup.get("expenses_loans"))==null?null:ne.hasError("required")),l(5),p("ngIf",(oe=i.secondFormGroup.get("expenses_other"))==null?null:oe.hasError("required")),l(6),p("stepControl",i.thirdFormGroup),l(),p("formGroup",i.thirdFormGroup),l(6),p("ngIf",(ue=i.thirdFormGroup.get("property_city"))==null?null:ue.hasError("required")),l(5),p("ngForOf",i.transactiontypeOptions),l(5),p("ngIf",(ae=i.thirdFormGroup.get("estimated_price_by_customer"))==null?null:ae.hasError("required")),l(),p("ngIf",(se=i.thirdFormGroup.get("estimated_price_by_customer"))==null?null:se.hasError("pattern")),l(5),p("ngIf",(me=i.thirdFormGroup.get("estimated_price_by_sales_agreement"))==null?null:me.hasError("required")),l(),p("ngIf",(le=i.thirdFormGroup.get("estimated_price_by_sales_agreement"))==null?null:le.hasError("pattern")),l(5),p("ngForOf",i.hasOtherProperties),l(5),p("ngIf",(pe=i.thirdFormGroup.get("amount_of_loan_requested"))==null?null:pe.hasError("required")),l(6),p("stepControl",i.fourthFormGroup),l(),p("formGroup",i.fourthFormGroup),l(2),ce(i.displayDocuments?171:-1)}},dependencies:[De,_e,fe,Te,Le,Ve,Oe,Ne,ke,qe,Me,Be,je,Ae,Ee,ye,ge,Ie,ve,Se,Fe,be,we,j],styles:['mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}.invalid-requirement[_ngcontent-%COMP%]{color:red}.valid-requirement[_ngcontent-%COMP%]{color:green}mat-horizontal-stepper[_ngcontent-%COMP%]{width:50vw;margin:0 auto}#content[_ngcontent-%COMP%]{background-color:#ffffff9a;padding:25px;border-radius:40px;min-width:max-content;min-height:60vh}.mat-stepper-horizontal.mat-stepper-label-position-end.ng-tns-c3820311392-0[_ngcontent-%COMP%]{z-index:1}.lead-body[_ngcontent-%COMP%]{background-image:url("./media/background-M3CTWIGI.jpg");height:100vh;background-size:cover;background-color:transparent;padding-top:18vh}']});let e=n;return e})();var Ze=(()=>{let n=class n{constructor(u,s,i){this.route=u,this.leadService=s,this.router=i,this.id=null,this.token=null,this.isNotValid=!1}ngOnInit(){console.log("in ngooninit of magic link"),this.route.queryParams.subscribe(u=>{this.id=u.id,this.token=u.token,console.log("ID:",this.id),console.log("Token:",this.token)}),this.id!=null&&this.leadService.checkToken(this.id).subscribe(u=>{u.status===200?(this.router.navigate(["lead/lead",this?.id]),console.log("jiii")):this.isNotValid=!0},u=>{console.error("Error checking token:",u),this.isNotValid=!0})}};n.\u0275fac=function(s){return new(s||n)(g(k),g(B),g(M))},n.\u0275cmp=O({type:n,selectors:[["app-magic-link"]],decls:2,vars:0,template:function(s,i){s&1&&(r(0,"p"),o(1,"magic-link works!"),t())}});let e=n;return e})();var kt=[{path:"",component:X},{path:"lead/:id",component:X},{path:"magic-link",component:Ze}],He=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=A({type:n}),n.\u0275inj=T({imports:[Y.forChild(kt),Y]});let e=n;return e})();var kr=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=A({type:n}),n.\u0275inj=T({imports:[he,$e,Ge,He,Qe]});let e=n;return e})();export{kr as a};
