import './polyfills.server.mjs';
import{a as Ye}from"./chunk-CQ2QF245.mjs";import{a as et}from"./chunk-5MNFDAOZ.mjs";import{I as K,X as Ke,ba as Xe,d as We,e as Qe,m as P,o as Ze}from"./chunk-MAVYPGCP.mjs";import{A as Ne,C as Te,F as Ve,N as Le,Qa as Je,Sa as j,Ta as He,Z as Oe,_ as Ae,aa as qe,ba as ke,ca as Me,i as ge,k as ve,la as Be,m as Se,ma as je,n as d,o as Ce,p as ye,q as Ie,ra as Pe,s as Y,sa as $e,ta as Re,u as be,ua as Ue,v as we,va as ze,x as Fe,y as Ge,z as xe}from"./chunk-LPZOA55Z.mjs";import{r as M,u as B,w as Z}from"./chunk-LLLXJOQE.mjs";import{Bb as i,Cb as t,Db as U,Hb as z,Kb as h,Mb as J,Rb as H,Sb as W,Tb as Q,Vb as u,Wb as C,Wc as he,Xb as k,Xc as fe,Ya as l,Z as O,Za as g,bd as Ee,ga as A,ha as q,oa as c,pa as _,qb as f,rb as _e,sb as p}from"./chunk-MPTJKU3H.mjs";import{a as I,b as De,h as ce}from"./chunk-NDYDZJSS.mjs";function tt(){return e=>{let n=new Date(e.value),E=new Date;return n>E?{invalidBirthDate:!0}:n.getFullYear()>E.getFullYear()?{invalidBirthDate:!0}:null}}function rt(){return e=>{let n=e.value;return n?/^\d{9}$/.test(n)?Array.from(n,Number).reduce((o,a,r)=>{let m=a*(r%2+1);return o+(m>9?m-9:m)},0)%10!==0?{invalidIsraeliId:!0}:null:{invalidIsraeliId:!0}:null}}var y=function(e){return e[e.Single=0]="Single",e[e.Married=1]="Married",e[e.Divorced=2]="Divorced",e[e.Widowed=3]="Widowed",e}(y||{}),$=function(e){return e[e.Employed=0]="Employed",e[e.SelfEmployed=1]="SelfEmployed",e}($||{}),S=function(e){return e[e.\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF=0]="\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF",e[e.New=1]="New",e[e.Old=2]="Old",e[e.Renovation=3]="Renovation",e[e.Other=4]="Other",e}(S||{}),R=function(e){return e[e.whatup=0]="whatup",e[e.email=1]="email",e}(R||{}),b=function(e){return e[e.l=0]="l",e[e.c=1]="c",e[e.a=2]="a",e}(b||{});var at=["stepper"];function st(e,n){e&1&&u(0,"\u05D4\u05D2\u05D3\u05E8\u05EA \u05E9\u05DD \u05DE\u05E9\u05EA\u05DE\u05E9 \u05D5\u05E1\u05D9\u05E1\u05DE\u05D0")}function mt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function lt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"),t())}function pt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function dt(e,n){if(e&1&&(i(0,"li",43),u(1),t()),e&2){let E=n.$implicit;l(),k(" ",E," ")}}function Dt(e,n){if(e&1&&(i(0,"li",44),u(1),t()),e&2){let E=n.$implicit;l(),k(" ",E," ")}}function ct(e,n){if(e&1&&(i(0,"div")(1,"p"),u(2,"\u05D3\u05E8\u05D9\u05E9\u05D5\u05EA \u05DC\u05E1\u05D9\u05E1\u05DE\u05D4 \u05D7\u05D6\u05E7\u05D4:"),t(),i(3,"ul"),f(4,dt,2,1,"li",41)(5,Dt,2,1,"li",42),t()()),e&2){let E=J();l(4),p("ngForOf",E.passwordStrength.valid),l(),p("ngForOf",E.passwordStrength.invalid)}}function _t(e,n){e&1&&u(0,"\u05E2\u05D3\u05DB\u05D5\u05DF \u05E4\u05E8\u05D8\u05D9\u05DD \u05D0\u05D9\u05E9\u05D9\u05D9\u05DD")}function ht(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function ft(e,n){e&1&&(i(0,"mat-error"),u(1," \u05D9\u05E9 \u05DC\u05DB\u05EA\u05D5\u05D1 \u05D1\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05E8\u05E7 \u05D0\u05D5\u05EA\u05D9\u05D5\u05EA "),t())}function Et(e,n){if(e&1&&(i(0,"mat-option",45),u(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function gt(e,n){if(e&1&&(i(0,"mat-option",45),u(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function vt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function St(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Ct(e,n){if(e&1&&(i(0,"mat-option",45),u(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function yt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function It(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function bt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function wt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Ft(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E7\u05E6\u05D1\u05D0\u05D5\u05EA \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Gt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05DE\u05D6\u05D5\u05E0\u05D5\u05EA \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function xt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E2\u05D5\u05D3 \u05DE\u05E7\u05D5\u05E8 \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Nt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Tt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Vt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Lt(e,n){e&1&&u(0,"\u05E4\u05E8\u05D8\u05D9 \u05D4\u05E0\u05DB\u05E1")}function Ot(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function At(e,n){if(e&1){let E=z();i(0,"mat-option",46),h("click",function(){let a=c(E).$implicit,r=J();return _(r.saveSelectionType(a.value))}),u(1),t()}if(e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function qt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function kt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05E8\u05E7 \u05E1\u05E4\u05E8\u05D5\u05EA"),t())}function Mt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Bt(e,n){e&1&&(i(0,"mat-error"),u(1,"\u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05E8\u05E7 \u05E1\u05E4\u05E8\u05D5\u05EA"),t())}function jt(e,n){if(e&1&&(i(0,"mat-option",45),u(1),t()),e&2){let E=n.$implicit;p("value",E.value),l(),C(E.label)}}function Pt(e,n){e&1&&(i(0,"mat-error",44),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}var ee=(()=>{let n=class n{constructor(o,a,r,m,D,s,w,F,G){this.loginservice=o,this.route=a,this.router=r,this._formBuilder=m,this.customerService=D,this.leadService=s,this.userService=w,this.documentType=F,this.customerTasks=G,this.user={id:0,userName:"",password:"",email:"",role:j.Customer,created_at:new Date(Date.now()),updated_at:new Date(Date.now())},this.currentStepIndex=0,this.isCustomer=!1,this.isLead=!1,this.isLinear=!0,this.isAddDocuments=!1,this.res="",this.lead_id=null,this.isDocsAdded=!1,this.uploadedFiles=[],this.showTable=!1,this.tableData=[],this.document={id:0,customer_Id:0,task_description:"",document_type_id:0,document_path:"",document_path2:"",status:0,status2:0,due_date:new Date(Date.now()),created_at:new Date(Date.now()),id2:0,updated_at:new Date(Date.now())},this.customerData={id:0,lead_id:this.lead_id,last_Name:"",first_Name:"",email:"",phone:"",connection:0,t_z:"",birthDate:new Date(Date.now()),family_status:0,number_of_people_in_house:0,address:"",job_status:0,customer_type:0,work_business_name:"",job_description:"",avarage_monthly_salary:0,years_in_current_position:0,income_rent:0,income_Government_Endorsement:0,income_other:0,expenses_rent:0,expenses_loans:0,expenses_other:0,property_city:"",transaction_type:0,estimated_price_by_customer:0,estimated_price_by_sales_agreement:0,has_other_properties:!1,amount_of_loan_requested:0,lastSynced:new Date(Date.now()),isArchived:!1,created_at:new Date(Date.now()),updated_at:new Date(Date.now()),userId:0},this.familyStatusOptions=[{value:y.Single,label:"\u05E8\u05D5\u05D5\u05E7"},{value:y.Married,label:"\u05E0\u05E9\u05D5\u05D9"},{value:y.Divorced,label:"\u05D2\u05E8\u05D5\u05E9"},{value:y.Widowed,label:"\u05D0\u05DC\u05DE\u05DF"}],this.jobStatusOptions=[{value:$.Employed,label:"\u05E9\u05DB\u05D9\u05E8"},{value:$.SelfEmployed,label:"\u05E2\u05E6\u05DE\u05D0\u05D9"}],this.transactiontypeOptions=[{value:S.\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF,label:"\u05DE\u05D7\u05D9\u05E8 \u05DC\u05DE\u05E9\u05EA\u05DB\u05DF"},{value:S.New,label:"\u05D9\u05D3 \u05E8\u05D0\u05E9\u05D5\u05E0\u05D4"},{value:S.Old,label:"\u05D9\u05D3 \u05E9\u05E0\u05D9\u05D4"},{value:S.Renovation,label:"\u05E9\u05D9\u05E4\u05D5\u05E6\u05D9\u05DD"},{value:S.Other,label:"\u05DC\u05DB\u05DC \u05DE\u05D8\u05E8\u05D4"}],this.connectionOptions=[{value:R.whatup,label:"\u05D5\u05D5\u05D0\u05E6\u05D0\u05E4"},{value:R.email,label:"\u05DE\u05D9\u05D9\u05DC"}],this.hasOtherProperties=[{value:!0,label:"\u05DB\u05DF"},{value:!1,label:"\u05DC\u05D0"}],this.passwordStrength={valid:[],invalid:[]},this.displayDocuments=!1,this.hidePassword=!0,this.passwordStrengthValidator=x=>{let v=x.value,N=/[A-Z]/.test(v),T=/[a-z]/.test(v),V=/[0-9]/.test(v),L=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(v);return this.passwordStrength.valid=[],this.passwordStrength.invalid=[],v&&v.length>=10?this.passwordStrength.valid.push("\u05D0\u05D5\u05E8\u05DA 10 \u05EA\u05D5\u05D5\u05D9\u05DD \u05DC\u05E4\u05D7\u05D5\u05EA"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05E8\u05DA 10 \u05EA\u05D5\u05D5\u05D9\u05DD \u05DC\u05E4\u05D7\u05D5\u05EA"),N?this.passwordStrength.valid.push("\u05D0\u05D5\u05EA \u05D2\u05D3\u05D5\u05DC\u05D4"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05EA \u05D2\u05D3\u05D5\u05DC\u05D4"),T?this.passwordStrength.valid.push("\u05D0\u05D5\u05EA \u05E7\u05D8\u05E0\u05D4"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05EA \u05E7\u05D8\u05E0\u05D4"),V?this.passwordStrength.valid.push("\u05DE\u05E1\u05E4\u05E8"):this.passwordStrength.invalid.push("\u05DE\u05E1\u05E4\u05E8"),L?this.passwordStrength.valid.push("\u05EA\u05D5 \u05DE\u05D9\u05D5\u05D7\u05D3"):this.passwordStrength.invalid.push("\u05EA\u05D5 \u05DE\u05D9\u05D5\u05D7\u05D3"),this.passwordStrength.invalid.length===0?null:{passwordStrength:!0}},this.firstFormGroup=new Ie({userName:new Y({value:"\u05D4\u05DB\u05E0\u05E1 \u05DE\u05D9\u05D9\u05DC",disabled:!1},[d.required,d.email]),password:new Y({value:null,disabled:!1},[d.required,d.minLength(10),this.passwordStrengthValidator])}),this.secondFormGroup=this._formBuilder.group({last_Name:["",[d.pattern("^[a-zA-Z\u05D0-\u05EA ]*$"),d.required]],first_Name:[""],email:[""],phone:[""],connection:[""],t_z:["",[d.required,rt()]],birthDate:["",[d.required,tt()]],family_status:["",d.required],number_of_people_in_house:["",[d.pattern("^[0-9]*$"),d.required]],address:["",d.required],job_status:[""],customer_type:[""],work_business_name:["",d.required],job_description:["",d.required],avarage_monthly_salary:["",[d.pattern("^[0-9]*$"),d.required]],years_in_current_position:["",[d.pattern("^[0-9]*$"),d.required]],income_rent:["",[d.pattern("^[0-9]*$"),d.required]],income_Government_Endorsement:["",[d.pattern("^[0-9]*$"),d.required]],income_other:["",[d.pattern("^[0-9]*$"),d.required]],expenses_rent:["",[d.pattern("^[0-9]*$"),d.required]],expenses_loans:["",[d.pattern("^[0-9]*$"),d.required]],expenses_other:["",d.required]}),this.thirdFormGroup=this._formBuilder.group({property_city:["",d.required],transaction_type:["",d.required],estimated_price_by_customer:["",[d.pattern("^[0-9]*$"),d.required]],estimated_price_by_sales_agreement:["",[d.pattern("^[0-9]*$"),d.required]],has_other_properties:["",d.required],amount_of_loan_requested:["",[d.pattern("^[0-9]*$"),d.required]],userId:[""]}),this.fourthFormGroup=this._formBuilder.group({documents:["",d.required]})}ngOnInit(){this.route.paramMap.subscribe(D=>{this.lead_id=Number(D.get("id")),console.log("in ng oninit id=",this.lead_id),sessionStorage.setItem("lead_id",this.lead_id+"")}),localStorage.getItem("enterOrNot")===null&&localStorage.setItem("enterOrNot","false");let o=localStorage.getItem("userName"),a=localStorage.getItem("password");o!==null&&a!==null&&(this.firstFormGroup.setValue({userName:JSON.parse(o),password:JSON.parse(a)}),this.firstFormGroup.get("userName")?.disable(),this.firstFormGroup.get("password")?.disable()),this.customerId=+localStorage.getItem("customerId"),this.lead_id=+localStorage.getItem("lead_id"),this.userId=+localStorage.getItem("userId"),this.customerData.id=this.customerId,this.customerData.lead_id=this.lead_id,this.customerData.userId=this.userId;let r=localStorage.getItem("currentStep");r!==null&&(this.currentStepIndex=parseInt(r,10));let m=localStorage.getItem("tableData");m&&(this.tableData=JSON.parse(m)),this.loadFormData()}onStepChange(o){this.currentStepIndex=o.selectedIndex,localStorage.setItem("currentStep",this.currentStepIndex.toString())}ngAfterViewInit(){this.loadCurrentStep()}isReturningUser(){return localStorage.getItem("enterOrNot")==="true"}checkUserNameAndPassword(){if(console.log("id========"+this.lead_id),this.lead_id=+sessionStorage.getItem("lead_id"),this.leadService.getLeadById(this.lead_id).subscribe(o=>{o&&(this.customerData.phone=o.phone,this.customerData.email=o.email,this.customerData.first_Name=o.first_Name,this.secondFormGroup.value.phone=this.customerData.phone,this.secondFormGroup.value.email=this.customerData.email,this.secondFormGroup.value.first_Name=this.customerData.first_Name,console.log("\u05E4\u05E8\u05D8\u05D9 \u05D4\u05DC\u05E7\u05D5\u05D7 \u05D4\u05EA\u05E2\u05D3\u05DB\u05E0\u05D5 \u05D1\u05E4\u05E8\u05D8\u05D9 \u05D4\u05DC\u05D9\u05D3"))}),localStorage.getItem("enterOrNot")=="true"){this.stepper.next();return}this.user.id=0,this.user.userName=this.firstFormGroup.value.userName,this.user.password=this.firstFormGroup.value.password,this.user.email=this.firstFormGroup.value.userName,this.user.role=j.Customer,this.user.created_at=new Date(Date.now()),this.user.updated_at=new Date(Date.now()),this.userService.IsExist(this.user).subscribe(o=>{localStorage.setItem("userName",JSON.stringify(this.user.userName)),localStorage.setItem("password",JSON.stringify(this.user.password)),this.res=o,o==="200"?localStorage.getItem("enterOrNot")==="true"?this.stepper.next():alert("\u05D0\u05D9\u05D9\u05DE\u05D9\u05DC \u05D0\u05D5 \u05E1\u05D9\u05E1\u05DE\u05D0 \u05EA\u05E4\u05D5\u05E1\u05D9\u05DD \u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05D0\u05D7\u05E8"):o==="404"&&this.user!==null&&this.user!==void 0&&this.user.password!==""&&this.user.userName!==""?(localStorage.setItem("enterOrNot","true"),this.stepper.next(),this.userService.createUserForLead(this.user,this.lead_id).subscribe({next:a=>{console.log("User created:",this.user),this.customerData.lead_id=this.lead_id,this.customerData.userId=a.id,console.log("customerData=====",this.customerData.id),console.log("createdUser 222",a),this.secondFormGroup.value.userId=a.id,this.customerService.createCustomerForLead(this.customerData,this.lead_id).subscribe({next:r=>{this.customerId=r.id,localStorage.setItem("customerId",this.customerId+""),localStorage.setItem("lead_id",this.lead_id+""),localStorage.setItem("userId",this.userId+""),this.customerData.customer_type=b.c,this.customerData.id=r.id,this.secondFormGroup.value.customer_type=b.c,console.log("Customer created:",this.customerData),this.loginservice.login(this.user.email,this.user.password).subscribe(m=>{let D=JSON.parse(m);sessionStorage.setItem("token",D.token),console.log("customerid=",this.loginservice.GetCurrentUser().customerId)},m=>{console.log("Login failed",m)})},error:r=>console.error("Error creating customer:",r)})},error:a=>console.error("Error creating user:",a)})):console.error("Unexpected response:",o)},o=>{console.error("Error during user existence check:",o)})}saveFormData(){let o={firstFormGroup:this.firstFormGroup.value,secondFormGroup:this.secondFormGroup.value,thirdFormGroup:this.thirdFormGroup.value,fourthFormGroup:this.fourthFormGroup.value,uploadedFiles:this.uploadedFiles};localStorage.setItem("formData",JSON.stringify(o))}saveCurrentStep(){localStorage.setItem("currentStep",JSON.stringify(this.stepper.selectedIndex))}loadCurrentStep(){let o=localStorage.getItem("currentStep");o&&(this.stepper.selectedIndex=JSON.parse(o))}loadFormData(){let o=localStorage.getItem("formData");if(o){let r=JSON.parse(o);console.log("data",r),this.firstFormGroup.patchValue(r.firstFormGroup),this.secondFormGroup.patchValue(r.secondFormGroup),this.thirdFormGroup.patchValue(r.thirdFormGroup),this.fourthFormGroup.patchValue(r.fourthFormGroup),this.uploadedFiles=r.uploadedFiles||[],this.customerData.last_Name=this.secondFormGroup.value.last_Name,this.customerData.first_Name=this.secondFormGroup.value.first_Name,this.customerData.email=this.secondFormGroup.value.email,this.customerData.phone=this.secondFormGroup.value.phone,this.customerData.connection=this.secondFormGroup.value.connection.toISOString,this.customerData.t_z=this.secondFormGroup.value.t_z,this.customerData.birthDate=this.secondFormGroup.value.birthDate,this.customerData.family_status=this.secondFormGroup.value.family_status.toISOString,this.customerData.number_of_people_in_house=this.secondFormGroup.value.number_of_people_in_house.toISOString,this.customerData.address=this.secondFormGroup.value.address,this.customerData.job_status=this.secondFormGroup.value.job_status.toISOString,this.customerData.customer_type=this.secondFormGroup.value.customer_type.toISOString,this.customerData.work_business_name=this.secondFormGroup.value.work_business_name,this.customerData.job_description=this.secondFormGroup.value.job_description,this.customerData.avarage_monthly_salary=this.secondFormGroup.value.avarage_monthly_salary.toISOString,this.customerData.years_in_current_position=this.secondFormGroup.value.years_in_current_position.toISOString,this.customerData.income_rent=this.secondFormGroup.value.income_rent.toISOString,this.customerData.income_Government_Endorsement=this.secondFormGroup.value.income_Government_Endorsement.toISOString,this.customerData.income_other=this.secondFormGroup.value.income_other.toISOString,this.customerData.expenses_rent=this.secondFormGroup.value.expenses_rent,this.customerData.expenses_loans=this.secondFormGroup.value.expenses_loans,this.customerData.expenses_other=this.secondFormGroup.value.expenses_other,this.customerData.property_city=this.thirdFormGroup.value.property_city,this.customerData.transaction_type=this.thirdFormGroup.value.transaction_type,this.customerData.estimated_price_by_customer=this.thirdFormGroup.value.estimated_price_by_customer.toISOString,this.customerData.estimated_price_by_sales_agreement=this.thirdFormGroup.value.estimated_price_by_sales_agreement.toISOString,this.customerData.has_other_properties=this.thirdFormGroup.value.has_other_properties.toISOString,this.customerData.amount_of_loan_requested=this.thirdFormGroup.value.amount_of_loan_requested.toISOString,this.customerData.isArchived=this.thirdFormGroup.value.isArchived,this.customerData.userId=this.thirdFormGroup.value.userId}console.log("customerData",this.customerData);let a=localStorage.getItem("customerData")}onInputChange(o,a){let r=a.target.value;this.customerData[o]=r,this.saveFormData()}onSelectionChange(o,a){o=="family_status"?(this.customerData[o]=a,this.customerData.family_status=Number(this.customerData.family_status)):o=="job_status"?(this.customerData[o]=a,this.customerData.job_status=Number(this.customerData.job_status)):o=="transaction_type"?(this.customerData[o]=a,this.customerData.transaction_type=Number(this.customerData.transaction_type)):o=="has_other_properties"?(this.customerData[o]=a,this.customerData.has_other_properties=this.customerData.has_other_properties,a===!0?this.customerData[o]=!0:this.customerData[o]=!1):o=="connection"?(this.customerData[o]=a,this.customerData.connection=Number(this.customerData.connection)):this.customerData[o]=a,this.saveFormData()}saveSelectionType(o){localStorage.setItem("tableData",JSON.stringify(this.tableData))}convertToISO8601WithTime(o){if(typeof o=="string"){let a=Ye(o,"yyyy-MM-dd",new Date);return a.setUTCHours(0,0,0,0),K(a,"yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'")}else return o instanceof Date?(o.setUTCHours(0,0,0,0),K(o,"yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'")):""}save(){console.log("in save line 527");try{console.log(this.firstFormGroup.value),console.log(this.secondFormGroup.value),console.log(this.thirdFormGroup.value),console.log(this.fourthFormGroup.value),console.log("111",this.customerData.userId);let o={userName:this.firstFormGroup.value.userName,password:this.firstFormGroup.value.password,email:this.secondFormGroup.value.email,role:j.Customer,created_at:this.convertToISO8601WithTime(new Date),updated_at:this.convertToISO8601WithTime(new Date)};this.userService.createUserForLead(this.user,Number(this.lead_id)).subscribe({next:r=>{let m=r.id;console.log("444",m)}});let a=De(I(I(I(I({},this.firstFormGroup.value),this.secondFormGroup.value),this.thirdFormGroup.value),this.fourthFormGroup.value),{lead_id:this.lead_id,userId:this.userId,birthdate:this.convertToISO8601WithTime(this.secondFormGroup.value.birthdate),Customer_Type:1});console.log("user 333",o),console.log("miri",a),this.customerService.createCustomerForLead(this.customerData,Number(this.lead_id)).subscribe({next:r=>{console.log("555",r),this.getDocsByTransactionTypeAndAddTasks(),console.log("The response from update customer =",r),this.removeStorage(),this.router.navigate(["auth/login"])},error:r=>{console.log("Error in update")}})}catch(o){console.error("Error in the process",o)}}saveSecondStep(){try{this.customerData.customer_type=b.l,this.customerService.updateCustomer(this.customerId,this.customerData).subscribe(()=>{console.log("saved second step")})}catch(o){console.error("Error in the process",o)}}removeStorage(){console.log("step 4 created"),localStorage.removeItem("enterOrNot"),localStorage.removeItem("formData"),localStorage.removeItem("currentStep"),localStorage.removeItem("ifEnter"),localStorage.removeItem("currentStepIndex"),localStorage.removeItem("tableData"),localStorage.removeItem("isAddDocuments"),localStorage.removeItem("customerId"),localStorage.removeItem("lead_id"),localStorage.removeItem("username"),localStorage.removeItem("password"),this.router.navigate(["auth/login"])}getDocsByTransactionTypeAndAddTasks(){let o=Number(this.customerData.transaction_type);console.log("in getDocsByTransactionTypeAndAddTasks num=",o),this.documentType.getDocsByTransactionType(o).subscribe(a=>{this.tableData=a,localStorage.setItem("tableData",JSON.stringify(this.tableData)),console.log("in getDocsByTransactionTypeAndAddTasks, res=",a),this.addToCustomerTask(),this.stepper.next()},a=>{console.error("Error fetching documents:",a)})}addToCustomerTask(){return ce(this,null,function*(){let o=this.tableData.map(a=>({id:0,id2:0,customer_Id:this.customerData.id,task_description:a.document_Name,document_type_id:Number(this.customerData.transaction_type),document_path:"",document_path2:"",status:0,status2:0,due_date:new Date(Date.now()),created_at:new Date(Date.now()),updated_at:new Date(Date.now())}));this.customerTasks.addDocuments(o).subscribe({next:a=>{console.log("Successfully added documents to customerTask"),this.isDocsAdded=!0,this.displayDocuments=!0,localStorage.setItem("isAddDocuments","true")},error:a=>{console.log("Failed to add documents to CustomerTask")}})})}};n.\u0275fac=function(a){return new(a||n)(g(He),g(M),g(B),g(Ne),g(We),g(P),g(Ze),g(Ke),g(Qe))},n.\u0275cmp=A({type:n,selectors:[["app-lead"]],viewQuery:function(a,r){if(a&1&&(H(Xe,5),H(at,5)),a&2){let m;W(m=Q())&&(r.documentsListCustomer=m.first),W(m=Q())&&(r.stepper=m.first)}},decls:170,vars:41,consts:[["stepper",""],["myButton",""],["dir","rtl",3,"selectionChange","linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["matInput","","formControlName","userName","required","","matTooltip","\u05D4\u05DB\u05E0\u05E1 \u05DE\u05D9\u05D9\u05DC- \u05D1\u05E9\u05D1\u05D9\u05DC \u05D4\u05DB\u05E0\u05D9\u05E1\u05D5\u05EA \u05D4\u05D1\u05D0\u05D5\u05EA","matTooltipPosition","right"],[4,"ngIf"],["matInput","","formControlName","password","required","","matTooltip","\u05D4\u05DB\u05E0\u05E1 \u05E1\u05D9\u05E1\u05DE\u05D0- \u05D1\u05E9\u05D1\u05D9\u05DC \u05D4\u05DB\u05E0\u05D9\u05E1\u05D5\u05EA \u05D4\u05D1\u05D0\u05D5\u05EA","matTooltipPosition","right",3,"type"],["matSuffix","",2,"cursor","pointer",3,"click"],["mat-button","",3,"click","disabled"],["matInput","","formControlName","last_Name",3,"input"],["matInput","","type","number","formControlName","connection",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","t_z",3,"input"],["matInput","","formControlName","birthDate","type","date",3,"input"],["formControlName","family_status",3,"selectionChange"],["matInput","","formControlName","number_of_people_in_house","type","number",3,"input"],["matInput","","formControlName","address","type","text",3,"input"],["formControlName","job_status",3,"selectionChange"],["matInput","","formControlName","work_business_name","type","text",3,"input"],["matInput","","formControlName","job_description","type","text",3,"input"],["matInput","","formControlName","avarage_monthly_salary","type","number",3,"input"],["matInput","","formControlName","years_in_current_position","type","number",3,"input"],["matInput","","formControlName","income_rent","type","number",3,"input"],["matInput","","formControlName","income_Government_Endorsement","type","number",3,"input"],["matInput","","formControlName","income_other","type","number",3,"input"],["matInput","","formControlName","expenses_rent","type","number",3,"input"],["matInput","","formControlName","expenses_loans","type","number",3,"input"],["matInput","","formControlName","expenses_other","type","number",3,"input"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext","",3,"click"],["matInput","","formControlName","property_city","type","text",3,"input"],["formControlName","transaction_type",3,"selectionChange"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","formControlName","estimated_price_by_customer","type","number",3,"input"],["matInput","","formControlName","estimated_price_by_sales_agreement","type","text",3,"input"],["formControlName","has_other_properties",3,"selectionChange"],["matInput","","formControlName","amount_of_loan_requested","type","number",3,"input"],["style","color: red;",4,"ngIf"],["mat-button","",3,"click"],["style","color: green;",4,"ngFor","ngForOf"],["style","color: red;",4,"ngFor","ngForOf"],[2,"color","green"],[2,"color","red"],[3,"value"],[3,"click","value"]],template:function(a,r){if(a&1){let m=z();i(0,"mat-horizontal-stepper",2,0),h("selectionChange",function(s){return c(m),_(r.onStepChange(s))}),i(2,"mat-step",3)(3,"form",4),f(4,st,1,0,"ng-template",5),i(5,"mat-form-field")(6,"mat-label"),u(7,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC"),t(),U(8,"input",6),f(9,mt,2,0,"mat-error",7)(10,lt,2,0,"mat-error",7),t(),i(11,"mat-form-field")(12,"mat-label"),u(13,"\u05E1\u05D9\u05E1\u05DE\u05D0"),t(),U(14,"input",8),i(15,"mat-icon",9),h("click",function(){return c(m),_(r.hidePassword=!r.hidePassword)}),u(16),t(),f(17,pt,2,0,"mat-error",7),t(),f(18,ct,6,2,"div",7),i(19,"div")(20,"button",10,1),h("click",function(){return c(m),_(r.checkUserNameAndPassword())}),u(22,"\u05D4\u05D1\u05D0"),t()()()(),i(23,"mat-step",3)(24,"form",4),f(25,_t,1,0,"ng-template",5),i(26,"mat-form-field")(27,"mat-label"),u(28,"\u05E9\u05DD \u05DE\u05E9\u05E4\u05D7\u05D4"),t(),i(29,"input",11),h("input",function(s){return c(m),_(r.onInputChange("last_Name",s))}),t(),f(30,ht,2,0,"mat-error",7)(31,ft,2,0,"mat-error",7),t(),i(32,"mat-form-field")(33,"mat-label"),u(34,"\u05D7\u05D9\u05D1\u05D5\u05E8"),t(),i(35,"mat-select",12),h("selectionChange",function(s){return c(m),_(r.onSelectionChange("connection",s.value))}),f(36,Et,2,2,"mat-option",13),t()(),i(37,"mat-form-field")(38,"mat-label"),u(39,"\u05EA.\u05D6."),t(),i(40,"input",14),h("input",function(s){return c(m),_(r.onInputChange("t_z",s))}),t(),i(41,"mat-error"),u(42," \u05DE\u05E1\u05E4\u05E8 \u05EA\u05E2\u05D5\u05D3\u05EA \u05D6\u05D4\u05D5\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF "),t()(),i(43,"mat-form-field")(44,"mat-label"),u(45,"\u05EA\u05D0\u05E8\u05D9\u05DA \u05DC\u05D9\u05D3\u05D4"),t(),i(46,"input",15),h("input",function(s){return c(m),_(r.onInputChange("birthDate",s))}),t(),i(47,"mat-error"),u(48," \u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05EA\u05D0\u05E8\u05D9\u05DA \u05EA\u05E7\u05D9\u05DF \u05E2\u05D3 \u05DC\u05EA\u05D0\u05E8\u05D9\u05DA \u05D4\u05E0\u05D5\u05DB\u05D7\u05D9 "),t()(),i(49,"mat-form-field")(50,"mat-label"),u(51,"\u05DE\u05E6\u05D1 \u05DE\u05E9\u05E4\u05D7\u05EA\u05D9"),t(),i(52,"mat-select",16),h("selectionChange",function(s){return c(m),_(r.onSelectionChange("family_status",s.value))}),f(53,gt,2,2,"mat-option",13),t()(),i(54,"mat-form-field")(55,"mat-label"),u(56,"\u05DE\u05E1\u05E4\u05E8 \u05D0\u05E0\u05E9\u05D9\u05DD \u05D1\u05D1\u05D9\u05EA"),t(),i(57,"input",17),h("input",function(s){return c(m),_(r.onInputChange("number_of_people_in_house",s))}),t(),f(58,vt,2,0,"mat-error",7),t(),i(59,"mat-form-field")(60,"mat-label"),u(61,"\u05DB\u05EA\u05D5\u05D1\u05EA"),t(),i(62,"input",18),h("input",function(s){return c(m),_(r.onInputChange("address",s))}),t(),f(63,St,2,0,"mat-error",7),t(),i(64,"h3"),u(65,"\u05E4\u05E8\u05D8\u05D9 \u05EA\u05E2\u05E1\u05D5\u05E7\u05D4"),t(),i(66,"mat-form-field")(67,"mat-label"),u(68,"\u05E1\u05D8\u05D8\u05D5\u05E1"),t(),i(69,"mat-select",19),h("selectionChange",function(s){return c(m),_(r.onSelectionChange("job_status",s.value))}),f(70,Ct,2,2,"mat-option",13),t()(),i(71,"mat-form-field")(72,"mat-label"),u(73,"\u05DE\u05E7\u05D5\u05DD \u05E2\u05D1\u05D5\u05D3\u05D4"),t(),i(74,"input",20),h("input",function(s){return c(m),_(r.onInputChange("work_business_name",s))}),t(),f(75,yt,2,0,"mat-error",7),t(),i(76,"mat-form-field")(77,"mat-label"),u(78,"\u05EA\u05E4\u05E7\u05D9\u05D3"),t(),i(79,"input",21),h("input",function(s){return c(m),_(r.onInputChange("job_description",s))}),t(),f(80,It,2,0,"mat-error",7),t(),i(81,"mat-form-field")(82,"mat-label"),u(83,"\u05DE\u05E9\u05DB\u05D5\u05E8\u05EA \u05D7\u05D5\u05D3\u05E9\u05D9\u05EA \u05DE\u05DE\u05D5\u05E6\u05E2\u05EA \u05E0\u05D8\u05D5"),t(),i(84,"input",22),h("input",function(s){return c(m),_(r.onInputChange("avarage_monthly_salary",s))}),t(),f(85,bt,2,0,"mat-error",7),t(),i(86,"mat-form-field")(87,"mat-label"),u(88,"\u05D5\u05EA\u05E7"),t(),i(89,"input",23),h("input",function(s){return c(m),_(r.onInputChange("years_in_current_position",s))}),t(),f(90,wt,2,0,"mat-error",7),t(),i(91,"h3"),u(92,"\u05D4\u05DB\u05E0\u05E1\u05D5\u05EA"),t(),i(93,"mat-form-field")(94,"mat-label"),u(95,"\u05E7\u05E6\u05D1\u05D0\u05D5\u05EA"),t(),i(96,"input",24),h("input",function(s){return c(m),_(r.onInputChange("income_rent",s))}),t(),f(97,Ft,2,0,"mat-error",7),t(),i(98,"mat-form-field")(99,"mat-label"),u(100,"\u05DE\u05D6\u05D5\u05E0\u05D5\u05EA"),t(),i(101,"input",25),h("input",function(s){return c(m),_(r.onInputChange("income_Government_Endorsement",s))}),t(),f(102,Gt,2,0,"mat-error",7),t(),i(103,"mat-form-field")(104,"mat-label"),u(105,"\u05DE\u05E7\u05D5\u05E8 \u05D0\u05D7\u05E8"),t(),i(106,"input",26),h("input",function(s){return c(m),_(r.onInputChange("income_other",s))}),t(),f(107,xt,2,0,"mat-error",7),t(),i(108,"h3"),u(109,"\u05D4\u05D5\u05E6\u05D0\u05D5\u05EA"),t(),i(110,"mat-form-field")(111,"mat-label"),u(112,"\u05E9\u05DB\u05E8 \u05D3\u05D9\u05E8\u05D4"),t(),i(113,"input",27),h("input",function(s){return c(m),_(r.onInputChange("expenses_rent",s))}),t(),f(114,Nt,2,0,"mat-error",7),t(),i(115,"mat-form-field")(116,"mat-label"),u(117,"\u05D4\u05DC\u05D5\u05D5\u05D0\u05D5\u05EA"),t(),i(118,"input",28),h("input",function(s){return c(m),_(r.onInputChange("expenses_loans",s))}),t(),f(119,Tt,2,0,"mat-error",7),t(),i(120,"mat-form-field")(121,"mat-label"),u(122,"\u05DE\u05E7\u05D5\u05E8 \u05D0\u05D7\u05E8"),t(),i(123,"input",29),h("input",function(s){return c(m),_(r.onInputChange("expenses_other",s))}),t(),f(124,Vt,2,0,"mat-error",7),t(),i(125,"div")(126,"button",30),u(127,"\u05D7\u05D6\u05D5\u05E8"),t(),i(128,"button",31),h("click",function(){return c(m),_(r.saveSecondStep())}),u(129,"\u05D4\u05D1\u05D0"),t()()()(),i(130,"mat-step",3)(131,"form",4),f(132,Lt,1,0,"ng-template",5),i(133,"mat-form-field")(134,"mat-label"),u(135,"\u05D9\u05D9\u05E9\u05D5\u05D1"),t(),i(136,"input",32),h("input",function(s){return c(m),_(r.onInputChange("property_city",s))}),t(),f(137,Ot,2,0,"mat-error",7),t(),i(138,"mat-form-field")(139,"mat-label"),u(140,"\u05E1\u05D5\u05D2 \u05E2\u05E1\u05E7\u05D4"),t(),i(141,"mat-select",33),h("selectionChange",function(s){return c(m),_(r.onSelectionChange("transaction_type",s.value))}),f(142,At,2,2,"mat-option",34),t()(),i(143,"mat-form-field")(144,"mat-label"),u(145,"\u05E9\u05D5\u05D5\u05D9 \u05D4\u05E0\u05DB\u05E1 \u05DC\u05E4\u05D9 \u05D4\u05E2\u05E8\u05DB\u05EA \u05DC\u05D5\u05D5\u05D4"),t(),i(146,"input",35),h("input",function(s){return c(m),_(r.onInputChange("estimated_price_by_customer",s))}),t(),f(147,qt,2,0,"mat-error",7)(148,kt,2,0,"mat-error",7),t(),i(149,"mat-form-field")(150,"mat-label"),u(151,"\u05E9\u05D5\u05D5\u05D4 \u05D4\u05E0\u05DB\u05E1 \u05DC\u05E4\u05D9 \u05D4\u05E1\u05DB\u05DD \u05DE\u05DB\u05E8"),t(),i(152,"input",36),h("input",function(s){return c(m),_(r.onInputChange("estimated_price_by_sales_agreement",s))}),t(),f(153,Mt,2,0,"mat-error",7)(154,Bt,2,0,"mat-error",7),t(),i(155,"mat-form-field")(156,"mat-label"),u(157,"\u05D9\u05E9 \u05E0\u05DB\u05E1\u05D9\u05DD \u05E0\u05D5\u05E1\u05E4\u05D9\u05DD \u05DC\u05DC\u05D5\u05D5\u05D4"),t(),i(158,"mat-select",37),h("selectionChange",function(s){return c(m),_(r.onSelectionChange("has_other_properties",s.value))}),f(159,jt,2,2,"mat-option",13),t()(),i(160,"mat-form-field")(161,"mat-label"),u(162,"\u05E1\u05DB\u05D5\u05DD \u05D4\u05D4\u05DC\u05D5\u05D5\u05D0\u05D4"),t(),i(163,"input",38),h("input",function(s){return c(m),_(r.onInputChange("amount_of_loan_requested",s))}),t(),f(164,Pt,2,0,"mat-error",39),t(),i(165,"div")(166,"button",30),u(167,"\u05D7\u05D6\u05D5\u05E8"),t(),i(168,"button",40),h("click",function(){return c(m),_(r.save())}),u(169,"\u05E9\u05DC\u05D7 \u05E0\u05EA\u05D5\u05E0\u05D9\u05DD"),t()()()()()}if(a&2){let m,D,s,w,F,G,x,v,N,T,V,L,te,re,ie,oe,ne,ue,ae,se,me,le,pe,de;p("linear",r.isLinear),l(2),p("stepControl",r.firstFormGroup),l(),p("formGroup",r.firstFormGroup),l(6),p("ngIf",(m=r.firstFormGroup.get("userName"))==null?null:m.hasError("required")),l(),p("ngIf",(D=r.firstFormGroup.get("userName"))==null?null:D.hasError("email")),l(4),p("type",r.hidePassword?"password":"text"),l(),_e("aria-label","Hide password")("aria-pressed",r.hidePassword),l(),k(" ",r.hidePassword?"visibility_off":"visibility"," "),l(),p("ngIf",(s=r.firstFormGroup.get("password"))==null?null:s.hasError("required")),l(),p("ngIf",(w=r.firstFormGroup.get("password"))==null?null:w.touched),l(2),p("disabled",r.firstFormGroup.invalid),l(3),p("stepControl",r.secondFormGroup),l(),p("formGroup",r.secondFormGroup),l(6),p("ngIf",(F=r.secondFormGroup.get("last_Name"))==null?null:F.hasError("required")),l(),p("ngIf",(G=r.secondFormGroup.get("last_Name"))==null?null:G.hasError("pattern")),l(5),p("ngForOf",r.connectionOptions),l(17),p("ngForOf",r.familyStatusOptions),l(5),p("ngIf",(x=r.secondFormGroup.get("number_of_people_in_house"))==null?null:x.hasError("required")),l(5),p("ngIf",(v=r.secondFormGroup.get("address"))==null?null:v.hasError("required")),l(7),p("ngForOf",r.jobStatusOptions),l(5),p("ngIf",(N=r.secondFormGroup.get("work_business_name"))==null?null:N.hasError("required")),l(5),p("ngIf",(T=r.secondFormGroup.get("job_description"))==null?null:T.hasError("required")),l(5),p("ngIf",(V=r.secondFormGroup.get("avarage_monthly_salary"))==null?null:V.hasError("required")),l(5),p("ngIf",(L=r.secondFormGroup.get("years_in_current_position"))==null?null:L.hasError("required")),l(7),p("ngIf",(te=r.secondFormGroup.get("income_rent"))==null?null:te.hasError("required")),l(5),p("ngIf",(re=r.secondFormGroup.get("income_Government_Endorsement"))==null?null:re.hasError("required")),l(5),p("ngIf",(ie=r.secondFormGroup.get("income_other"))==null?null:ie.hasError("required")),l(7),p("ngIf",(oe=r.secondFormGroup.get("expenses_rent"))==null?null:oe.hasError("required")),l(5),p("ngIf",(ne=r.secondFormGroup.get("expenses_loans"))==null?null:ne.hasError("required")),l(5),p("ngIf",(ue=r.secondFormGroup.get("expenses_other"))==null?null:ue.hasError("required")),l(6),p("stepControl",r.thirdFormGroup),l(),p("formGroup",r.thirdFormGroup),l(6),p("ngIf",(ae=r.thirdFormGroup.get("property_city"))==null?null:ae.hasError("required")),l(5),p("ngForOf",r.transactiontypeOptions),l(5),p("ngIf",(se=r.thirdFormGroup.get("estimated_price_by_customer"))==null?null:se.hasError("required")),l(),p("ngIf",(me=r.thirdFormGroup.get("estimated_price_by_customer"))==null?null:me.hasError("pattern")),l(5),p("ngIf",(le=r.thirdFormGroup.get("estimated_price_by_sales_agreement"))==null?null:le.hasError("required")),l(),p("ngIf",(pe=r.thirdFormGroup.get("estimated_price_by_sales_agreement"))==null?null:pe.hasError("pattern")),l(5),p("ngForOf",r.hasOtherProperties),l(5),p("ngIf",(de=r.thirdFormGroup.get("amount_of_loan_requested"))==null?null:de.hasError("required"))}},dependencies:[he,fe,ge,Le,ke,Oe,Ae,qe,Me,Ve,$e,Pe,Re,Ue,ze,Be,ve,je,be,Se,we,Ce,ye,xe,Fe,Ge],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}.invalid-requirement[_ngcontent-%COMP%]{color:red}.valid-requirement[_ngcontent-%COMP%]{color:green}mat-horizontal-stepper[_ngcontent-%COMP%]{width:50vw;margin:0 auto}#content[_ngcontent-%COMP%]{background-color:#ffffff9a;padding:25px;border-radius:40px;min-width:max-content;min-height:60vh}"]});let e=n;return e})();var it=(()=>{let n=class n{constructor(o,a,r){this.route=o,this.leadService=a,this.router=r,this.id=null,this.token=null,this.isNotValid=!1}ngOnInit(){console.log("in ngooninit of magic link"),this.route.queryParams.subscribe(o=>{this.id=o.id,this.token=o.token,console.log("ID:",this.id),console.log("Token:",this.token)}),this.id!=null&&this.leadService.checkToken(this.id).subscribe(o=>{o.status===200?this.router.navigate(["lead/lead",this?.id]):this.isNotValid=!0},o=>{console.error("Error checking token:",o),this.isNotValid=!0})}};n.\u0275fac=function(a){return new(a||n)(g(M),g(P),g(B))},n.\u0275cmp=A({type:n,selectors:[["app-magic-link"]],decls:2,vars:0,template:function(a,r){a&1&&(i(0,"p"),u(1,"magic-link works!"),t())}});let e=n;return e})();var $t=[{path:"",component:ee},{path:"lead/:id",component:ee},{path:"magic-link",component:it}],ot=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=q({type:n}),n.\u0275inj=O({imports:[Z.forChild($t),Z]});let e=n;return e})();var Ur=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=q({type:n}),n.\u0275inj=O({imports:[Ee,Je,Te,ot,et]});let e=n;return e})();export{Ur as a};
