import './polyfills.server.mjs';
import{a as Ze}from"./chunk-N3DSDOZE.mjs";import{G as We,M as Ye,d as Je,e as Ue,m as M,o as Qe}from"./chunk-TDI6HSHA.mjs";import{A as Fe,C as xe,F as Ge,N as Ne,Qa as Re,Sa as Z,Ta as ze,Z as Ve,_ as Te,aa as Le,ba as Ae,ca as Oe,i as he,k as fe,la as qe,m as Ee,ma as ke,n as d,o as ge,p as ve,q as Se,ra as Be,s as Y,sa as Me,ta as je,u as Ce,ua as Pe,v as ye,va as $e,x as Ie,y as be,z as we}from"./chunk-LPZOA55Z.mjs";import{r as k,u as B,w as W}from"./chunk-LLLXJOQE.mjs";import{Bb as r,Cb as t,Db as $,Hb as R,Kb as h,Mb as z,Rb as J,Sb as U,Tb as Q,Vb as u,Wb as C,Wc as De,Xb as q,Xc as ce,Ya as l,Z as L,Za as g,bd as _e,ga as A,ha as O,oa as c,pa as _,qb as f,rb as de,sb as p}from"./chunk-MPTJKU3H.mjs";import{h as pe}from"./chunk-NDYDZJSS.mjs";function He(){return e=>{let o=new Date(e.value),E=new Date;return o>E?{invalidBirthDate:!0}:o.getFullYear()>E.getFullYear()?{invalidBirthDate:!0}:null}}function Ke(){return e=>{let o=e.value;return o?/^\d{9}$/.test(o)?Array.from(o,Number).reduce((n,s,i)=>{let m=s*(i%2+1);return n+(m>9?m-9:m)},0)%10!==0?{invalidIsraeliId:!0}:null:{invalidIsraeliId:!0}:null}}var y=function(e){return e[e.Single=0]="Single",e[e.Married=1]="Married",e[e.Divorced=2]="Divorced",e[e.Widowed=3]="Widowed",e}(y||{}),j=function(e){return e[e.Employed=0]="Employed",e[e.SelfEmployed=1]="SelfEmployed",e}(j||{}),S=function(e){return e[e.\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF=0]="\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF",e[e.New=1]="New",e[e.Old=2]="Old",e[e.Renovation=3]="Renovation",e[e.Other=4]="Other",e}(S||{}),P=function(e){return e[e.whatup=0]="whatup",e[e.email=1]="email",e}(P||{}),I=function(e){return e[e.l=0]="l",e[e.c=1]="c",e[e.a=2]="a",e}(I||{});var it=["stepper"];function ot(e,o){e&1&&u(0,"\u05D4\u05D2\u05D3\u05E8\u05EA \u05E9\u05DD \u05DE\u05E9\u05EA\u05DE\u05E9 \u05D5\u05E1\u05D9\u05E1\u05DE\u05D0")}function nt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function ut(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"),t())}function at(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function st(e,o){if(e&1&&(r(0,"li",43),u(1),t()),e&2){let E=o.$implicit;l(),q(" ",E," ")}}function mt(e,o){if(e&1&&(r(0,"li",44),u(1),t()),e&2){let E=o.$implicit;l(),q(" ",E," ")}}function lt(e,o){if(e&1&&(r(0,"div")(1,"p"),u(2,"\u05D3\u05E8\u05D9\u05E9\u05D5\u05EA \u05DC\u05E1\u05D9\u05E1\u05DE\u05D4 \u05D7\u05D6\u05E7\u05D4:"),t(),r(3,"ul"),f(4,st,2,1,"li",41)(5,mt,2,1,"li",42),t()()),e&2){let E=z();l(4),p("ngForOf",E.passwordStrength.valid),l(),p("ngForOf",E.passwordStrength.invalid)}}function pt(e,o){e&1&&u(0,"\u05E2\u05D3\u05DB\u05D5\u05DF \u05E4\u05E8\u05D8\u05D9\u05DD \u05D0\u05D9\u05E9\u05D9\u05D9\u05DD")}function dt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Dt(e,o){e&1&&(r(0,"mat-error"),u(1," \u05D9\u05E9 \u05DC\u05DB\u05EA\u05D5\u05D1 \u05D1\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05E8\u05E7 \u05D0\u05D5\u05EA\u05D9\u05D5\u05EA "),t())}function ct(e,o){if(e&1&&(r(0,"mat-option",45),u(1),t()),e&2){let E=o.$implicit;p("value",E.value),l(),C(E.label)}}function _t(e,o){if(e&1&&(r(0,"mat-option",45),u(1),t()),e&2){let E=o.$implicit;p("value",E.value),l(),C(E.label)}}function ht(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function ft(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Et(e,o){if(e&1&&(r(0,"mat-option",45),u(1),t()),e&2){let E=o.$implicit;p("value",E.value),l(),C(E.label)}}function gt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function vt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function St(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Ct(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function yt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E7\u05E6\u05D1\u05D0\u05D5\u05EA \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function It(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05DE\u05D6\u05D5\u05E0\u05D5\u05EA \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function bt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E2\u05D5\u05D3 \u05DE\u05E7\u05D5\u05E8 \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function wt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Ft(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function xt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D6\u05D4 \u05D4\u05D5\u05D0 \u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4 \u05D1\u05DE\u05D9\u05D3\u05D4 \u05D5\u05D0\u05D9\u05DF \u05E0\u05D0 \u05DC\u05D4\u05E7\u05D9\u05E9 0"),t())}function Gt(e,o){e&1&&u(0,"\u05E4\u05E8\u05D8\u05D9 \u05D4\u05E0\u05DB\u05E1")}function Nt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Vt(e,o){if(e&1){let E=R();r(0,"mat-option",46),h("click",function(){let s=c(E).$implicit,i=z();return _(i.saveSelectionType(s.value))}),u(1),t()}if(e&2){let E=o.$implicit;p("value",E.value),l(),C(E.label)}}function Tt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Lt(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05E8\u05E7 \u05E1\u05E4\u05E8\u05D5\u05EA"),t())}function At(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}function Ot(e,o){e&1&&(r(0,"mat-error"),u(1,"\u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05E8\u05E7 \u05E1\u05E4\u05E8\u05D5\u05EA"),t())}function qt(e,o){if(e&1&&(r(0,"mat-option",45),u(1),t()),e&2){let E=o.$implicit;p("value",E.value),l(),C(E.label)}}function kt(e,o){e&1&&(r(0,"mat-error",44),u(1,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),t())}var K=(()=>{let o=class o{constructor(n,s,i,m,D,a,b,w,F){this.loginservice=n,this.route=s,this.router=i,this._formBuilder=m,this.customerService=D,this.leadService=a,this.userService=b,this.documentType=w,this.customerTasks=F,this.user={id:0,userName:"",password:"",email:"",role:Z.Customer,created_at:new Date(Date.now()),updated_at:new Date(Date.now())},this.currentStepIndex=0,this.isCustomer=!1,this.isLead=!1,this.isLinear=!0,this.isAddDocuments=!1,this.res="",this.lead_id=null,this.isDocsAdded=!1,this.uploadedFiles=[],this.showTable=!1,this.tableData=[],this.document={id:0,customer_Id:0,task_description:"",document_type_id:0,document_path:"",document_path2:"",status:0,status2:0,due_date:new Date(Date.now()),created_at:new Date(Date.now()),id2:0,updated_at:new Date(Date.now())},this.customerData={id:0,lead_id:this.lead_id,last_Name:"",first_Name:"",email:"",phone:"",connection:0,t_z:"",birthDate:new Date(Date.now()),family_status:0,number_of_people_in_house:0,address:"",job_status:0,customer_type:0,work_business_name:"",job_description:"",avarage_monthly_salary:0,years_in_current_position:0,income_rent:0,income_Government_Endorsement:0,income_other:0,expenses_rent:0,expenses_loans:0,expenses_other:0,property_city:"",transaction_type:0,estimated_price_by_customer:0,estimated_price_by_sales_agreement:0,has_other_properties:!1,amount_of_loan_requested:0,lastSynced:new Date(Date.now()),isArchived:!1,created_at:new Date(Date.now()),updated_at:new Date(Date.now()),userId:0},this.familyStatusOptions=[{value:y.Single,label:"\u05E8\u05D5\u05D5\u05E7"},{value:y.Married,label:"\u05E0\u05E9\u05D5\u05D9"},{value:y.Divorced,label:"\u05D2\u05E8\u05D5\u05E9"},{value:y.Widowed,label:"\u05D0\u05DC\u05DE\u05DF"}],this.jobStatusOptions=[{value:j.Employed,label:"\u05E9\u05DB\u05D9\u05E8"},{value:j.SelfEmployed,label:"\u05E2\u05E6\u05DE\u05D0\u05D9"}],this.transactiontypeOptions=[{value:S.\u05DE\u05D7\u05D9\u05E8_\u05DC\u05DE\u05E9\u05EA\u05DB\u05DF,label:"\u05DE\u05D7\u05D9\u05E8 \u05DC\u05DE\u05E9\u05EA\u05DB\u05DF"},{value:S.New,label:"\u05D9\u05D3 \u05E8\u05D0\u05E9\u05D5\u05E0\u05D4"},{value:S.Old,label:"\u05D9\u05D3 \u05E9\u05E0\u05D9\u05D4"},{value:S.Renovation,label:"\u05E9\u05D9\u05E4\u05D5\u05E6\u05D9\u05DD"},{value:S.Other,label:"\u05DC\u05DB\u05DC \u05DE\u05D8\u05E8\u05D4"}],this.connectionOptions=[{value:P.whatup,label:"\u05D5\u05D5\u05D0\u05E6\u05D0\u05E4"},{value:P.email,label:"\u05DE\u05D9\u05D9\u05DC"}],this.hasOtherProperties=[{value:!0,label:"\u05DB\u05DF"},{value:!1,label:"\u05DC\u05D0"}],this.passwordStrength={valid:[],invalid:[]},this.displayDocuments=!1,this.hidePassword=!0,this.passwordStrengthValidator=x=>{let v=x.value,G=/[A-Z]/.test(v),N=/[a-z]/.test(v),V=/[0-9]/.test(v),T=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(v);return this.passwordStrength.valid=[],this.passwordStrength.invalid=[],v&&v.length>=10?this.passwordStrength.valid.push("\u05D0\u05D5\u05E8\u05DA 10 \u05EA\u05D5\u05D5\u05D9\u05DD \u05DC\u05E4\u05D7\u05D5\u05EA"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05E8\u05DA 10 \u05EA\u05D5\u05D5\u05D9\u05DD \u05DC\u05E4\u05D7\u05D5\u05EA"),G?this.passwordStrength.valid.push("\u05D0\u05D5\u05EA \u05D2\u05D3\u05D5\u05DC\u05D4"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05EA \u05D2\u05D3\u05D5\u05DC\u05D4"),N?this.passwordStrength.valid.push("\u05D0\u05D5\u05EA \u05E7\u05D8\u05E0\u05D4"):this.passwordStrength.invalid.push("\u05D0\u05D5\u05EA \u05E7\u05D8\u05E0\u05D4"),V?this.passwordStrength.valid.push("\u05DE\u05E1\u05E4\u05E8"):this.passwordStrength.invalid.push("\u05DE\u05E1\u05E4\u05E8"),T?this.passwordStrength.valid.push("\u05EA\u05D5 \u05DE\u05D9\u05D5\u05D7\u05D3"):this.passwordStrength.invalid.push("\u05EA\u05D5 \u05DE\u05D9\u05D5\u05D7\u05D3"),this.passwordStrength.invalid.length===0?null:{passwordStrength:!0}},this.firstFormGroup=new Se({userName:new Y({value:"\u05D4\u05DB\u05E0\u05E1 \u05DE\u05D9\u05D9\u05DC",disabled:!1},[d.required,d.email]),password:new Y({value:null,disabled:!1},[d.required,d.minLength(10),this.passwordStrengthValidator])}),this.secondFormGroup=this._formBuilder.group({last_Name:["",[d.pattern("^[a-zA-Z\u05D0-\u05EA ]*$"),d.required]],first_Name:[""],email:[""],phone:[""],connection:[""],t_z:["",[d.required,Ke()]],birthDate:["",[d.required,He()]],family_status:["",d.required],number_of_people_in_house:["",[d.pattern("^[0-9]*$"),d.required]],address:["",d.required],job_status:[""],customer_type:[""],work_business_name:["",d.required],job_description:["",d.required],avarage_monthly_salary:["",[d.pattern("^[0-9]*$"),d.required]],years_in_current_position:["",[d.pattern("^[0-9]*$"),d.required]],income_rent:["",[d.pattern("^[0-9]*$"),d.required]],income_Government_Endorsement:["",[d.pattern("^[0-9]*$"),d.required]],income_other:["",[d.pattern("^[0-9]*$"),d.required]],expenses_rent:["",[d.pattern("^[0-9]*$"),d.required]],expenses_loans:["",[d.pattern("^[0-9]*$"),d.required]],expenses_other:["",d.required]}),this.thirdFormGroup=this._formBuilder.group({property_city:["",d.required],transaction_type:["",d.required],estimated_price_by_customer:["",[d.pattern("^[0-9]*$"),d.required]],estimated_price_by_sales_agreement:["",[d.pattern("^[0-9]*$"),d.required]],has_other_properties:["",d.required],amount_of_loan_requested:["",[d.pattern("^[0-9]*$"),d.required]],userId:[""]}),this.fourthFormGroup=this._formBuilder.group({documents:["",d.required]})}ngOnInit(){this.route.paramMap.subscribe(D=>{this.lead_id=Number(D.get("id")),console.log("in ng oninit id=",this.lead_id),sessionStorage.setItem("lead_id",this.lead_id+"")}),localStorage.getItem("enterOrNot")===null&&localStorage.setItem("enterOrNot","false");let n=localStorage.getItem("userName"),s=localStorage.getItem("password");n!==null&&s!==null&&(this.firstFormGroup.setValue({userName:JSON.parse(n),password:JSON.parse(s)}),this.firstFormGroup.get("userName")?.disable(),this.firstFormGroup.get("password")?.disable()),this.customerId=+localStorage.getItem("customerId"),this.lead_id=+localStorage.getItem("lead_id"),this.userId=+localStorage.getItem("userId"),this.customerData.id=this.customerId,this.customerData.lead_id=this.lead_id,this.customerData.userId=this.userId;let i=localStorage.getItem("currentStep");i!==null&&(this.currentStepIndex=parseInt(i,10));let m=localStorage.getItem("tableData");m&&(this.tableData=JSON.parse(m)),this.loadFormData()}onStepChange(n){this.currentStepIndex=n.selectedIndex,localStorage.setItem("currentStep",this.currentStepIndex.toString())}ngAfterViewInit(){this.loadCurrentStep()}isReturningUser(){return localStorage.getItem("enterOrNot")==="true"}checkUserNameAndPassword(){if(console.log("id========"+this.lead_id),this.lead_id=+sessionStorage.getItem("lead_id"),this.leadService.getLeadById(this.lead_id).subscribe(n=>{n&&(this.customerData.phone=n.phone,this.customerData.email=n.email,this.customerData.first_Name=n.first_Name,this.secondFormGroup.value.phone=this.customerData.phone,this.secondFormGroup.value.email=this.customerData.email,this.secondFormGroup.value.first_Name=this.customerData.first_Name,console.log("\u05E4\u05E8\u05D8\u05D9 \u05D4\u05DC\u05E7\u05D5\u05D7 \u05D4\u05EA\u05E2\u05D3\u05DB\u05E0\u05D5 \u05D1\u05E4\u05E8\u05D8\u05D9 \u05D4\u05DC\u05D9\u05D3"))}),localStorage.getItem("enterOrNot")=="true"){this.stepper.next();return}this.user.id=0,this.user.userName=this.firstFormGroup.value.userName,this.user.password=this.firstFormGroup.value.password,this.user.email=this.firstFormGroup.value.userName,this.user.role=Z.Customer,this.user.created_at=new Date(Date.now()),this.user.updated_at=new Date(Date.now()),this.userService.IsExist(this.user).subscribe(n=>{localStorage.setItem("userName",JSON.stringify(this.user.userName)),localStorage.setItem("password",JSON.stringify(this.user.password)),this.res=n,n==="200"?localStorage.getItem("enterOrNot")==="true"?this.stepper.next():alert("\u05D0\u05D9\u05D9\u05DE\u05D9\u05DC \u05D0\u05D5 \u05E1\u05D9\u05E1\u05DE\u05D0 \u05EA\u05E4\u05D5\u05E1\u05D9\u05DD \u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05D0\u05D7\u05E8"):n==="404"&&this.user!==null&&this.user!==void 0&&this.user.password!==""&&this.user.userName!==""?(localStorage.setItem("enterOrNot","true"),this.stepper.next(),this.userService.createUserForLead(this.user,this.lead_id).subscribe({next:s=>{console.log("User created:",this.user),this.customerData.lead_id=this.lead_id,this.customerData.userId=s.id,console.log("customerData=====",this.customerData.id),this.secondFormGroup.value.userId=s.id,this.customerService.createCustomerForLead(this.customerData,this.lead_id).subscribe({next:i=>{this.customerId=i.id,localStorage.setItem("customerId",this.customerId+""),localStorage.setItem("lead_id",this.lead_id+""),localStorage.setItem("userId",this.userId+""),this.customerData.customer_type=I.c,this.customerData.id=i.id,this.secondFormGroup.value.customer_type=I.c,console.log("Customer created:",this.customerData),this.loginservice.login(this.user.email,this.user.password).subscribe(m=>{let D=JSON.parse(m);sessionStorage.setItem("token",D.token),console.log("customerid=",this.loginservice.GetCurrentUser().customerId)},m=>{console.log("Login failed",m)})},error:i=>console.error("Error creating customer:",i)})},error:s=>console.error("Error creating user:",s)})):console.error("Unexpected response:",n)},n=>{console.error("Error during user existence check:",n)})}saveFormData(){let n={firstFormGroup:this.firstFormGroup.value,secondFormGroup:this.secondFormGroup.value,thirdFormGroup:this.thirdFormGroup.value,fourthFormGroup:this.fourthFormGroup.value,uploadedFiles:this.uploadedFiles};localStorage.setItem("formData",JSON.stringify(n))}saveCurrentStep(){localStorage.setItem("currentStep",JSON.stringify(this.stepper.selectedIndex))}loadCurrentStep(){let n=localStorage.getItem("currentStep");n&&(this.stepper.selectedIndex=JSON.parse(n))}loadFormData(){let n=localStorage.getItem("formData");if(n){let i=JSON.parse(n);console.log("data",i),this.firstFormGroup.patchValue(i.firstFormGroup),this.secondFormGroup.patchValue(i.secondFormGroup),this.thirdFormGroup.patchValue(i.thirdFormGroup),this.fourthFormGroup.patchValue(i.fourthFormGroup),this.uploadedFiles=i.uploadedFiles||[],this.customerData.last_Name=this.secondFormGroup.value.last_Name,this.customerData.first_Name=this.secondFormGroup.value.first_Name,this.customerData.email=this.secondFormGroup.value.email,this.customerData.phone=this.secondFormGroup.value.phone,this.customerData.connection=this.secondFormGroup.value.connection.toISOString,this.customerData.t_z=this.secondFormGroup.value.t_z,this.customerData.birthDate=this.secondFormGroup.value.birthDate,this.customerData.family_status=this.secondFormGroup.value.family_status.toISOString,this.customerData.number_of_people_in_house=this.secondFormGroup.value.number_of_people_in_house.toISOString,this.customerData.address=this.secondFormGroup.value.address,this.customerData.job_status=this.secondFormGroup.value.job_status.toISOString,this.customerData.customer_type=this.secondFormGroup.value.customer_type.toISOString,this.customerData.work_business_name=this.secondFormGroup.value.work_business_name,this.customerData.job_description=this.secondFormGroup.value.job_description,this.customerData.avarage_monthly_salary=this.secondFormGroup.value.avarage_monthly_salary.toISOString,this.customerData.years_in_current_position=this.secondFormGroup.value.years_in_current_position.toISOString,this.customerData.income_rent=this.secondFormGroup.value.income_rent.toISOString,this.customerData.income_Government_Endorsement=this.secondFormGroup.value.income_Government_Endorsement.toISOString,this.customerData.income_other=this.secondFormGroup.value.income_other.toISOString,this.customerData.expenses_rent=this.secondFormGroup.value.expenses_rent,this.customerData.expenses_loans=this.secondFormGroup.value.expenses_loans,this.customerData.expenses_other=this.secondFormGroup.value.expenses_other,this.customerData.property_city=this.thirdFormGroup.value.property_city,this.customerData.transaction_type=this.thirdFormGroup.value.transaction_type,this.customerData.estimated_price_by_customer=this.thirdFormGroup.value.estimated_price_by_customer.toISOString,this.customerData.estimated_price_by_sales_agreement=this.thirdFormGroup.value.estimated_price_by_sales_agreement.toISOString,this.customerData.has_other_properties=this.thirdFormGroup.value.has_other_properties.toISOString,this.customerData.amount_of_loan_requested=this.thirdFormGroup.value.amount_of_loan_requested.toISOString,this.customerData.isArchived=this.thirdFormGroup.value.isArchived,this.customerData.userId=this.thirdFormGroup.value.userId}console.log("customerData",this.customerData);let s=localStorage.getItem("customerData")}onInputChange(n,s){let i=s.target.value;this.customerData[n]=i,this.saveFormData()}onSelectionChange(n,s){n=="family_status"?(this.customerData[n]=s,this.customerData.family_status=Number(this.customerData.family_status)):n=="job_status"?(this.customerData[n]=s,this.customerData.job_status=Number(this.customerData.job_status)):n=="transaction_type"?(this.customerData[n]=s,this.customerData.transaction_type=Number(this.customerData.transaction_type)):n=="has_other_properties"?(this.customerData[n]=s,this.customerData.has_other_properties=this.customerData.has_other_properties,s===!0?this.customerData[n]=!0:this.customerData[n]=!1):n=="connection"?(this.customerData[n]=s,this.customerData.connection=Number(this.customerData.connection)):this.customerData[n]=s,this.saveFormData()}saveSelectionType(n){localStorage.setItem("tableData",JSON.stringify(this.tableData))}save(){console.log("in save line 527");try{console.log("in try line 530"),this.customerService.updateCustomer(this.customerId,this.customerData).subscribe({next:n=>{this.getDocsByTransactionTypeAndAddTasks(),console.log("The response from update customer =",n),this.removeStorage(),this.router.navigate(["auth/login"])},error:n=>{console.log("Error in update")}})}catch(n){console.error("Error in the process",n)}}saveSecondStep(){try{this.customerData.customer_type=I.l,this.customerService.createCustomerForLead(this.customerData,this.customerId).subscribe(n=>{console.log("saved second step"),console.log("\u05E0\u05D5\u05E6\u05E8 \u05DC\u05E7\u05D5\u05D7 res=",n)})}catch(n){console.error("Error in the process",n)}}removeStorage(){console.log("step 4 created"),localStorage.removeItem("enterOrNot"),localStorage.removeItem("formData"),localStorage.removeItem("currentStep"),localStorage.removeItem("ifEnter"),localStorage.removeItem("currentStepIndex"),localStorage.removeItem("tableData"),localStorage.removeItem("isAddDocuments"),localStorage.removeItem("customerId"),localStorage.removeItem("lead_id"),localStorage.removeItem("username"),localStorage.removeItem("password"),this.router.navigate(["auth/login"])}getDocsByTransactionTypeAndAddTasks(){let n=Number(this.customerData.transaction_type);console.log("in getDocsByTransactionTypeAndAddTasks num=",n),this.documentType.getDocsByTransactionType(n).subscribe(s=>{this.tableData=s,localStorage.setItem("tableData",JSON.stringify(this.tableData)),console.log("in getDocsByTransactionTypeAndAddTasks, res=",s),this.addToCustomerTask(),this.stepper.next()},s=>{console.error("Error fetching documents:",s)})}addToCustomerTask(){return pe(this,null,function*(){let n=this.tableData.map(s=>({id:0,id2:0,customer_Id:this.customerData.id,task_description:s.document_Name,document_type_id:Number(this.customerData.transaction_type),document_path:"",document_path2:"",status:0,status2:0,due_date:new Date(Date.now()),created_at:new Date(Date.now()),updated_at:new Date(Date.now())}));this.customerTasks.addDocuments(n).subscribe({next:s=>{console.log("Successfully added documents to customerTask"),this.isDocsAdded=!0,this.displayDocuments=!0,localStorage.setItem("isAddDocuments","true")},error:s=>{console.log("Failed to add documents to CustomerTask")}})})}};o.\u0275fac=function(s){return new(s||o)(g(ze),g(k),g(B),g(Fe),g(Je),g(M),g(Qe),g(We),g(Ue))},o.\u0275cmp=A({type:o,selectors:[["app-lead"]],viewQuery:function(s,i){if(s&1&&(J(Ye,5),J(it,5)),s&2){let m;U(m=Q())&&(i.documentsListCustomer=m.first),U(m=Q())&&(i.stepper=m.first)}},decls:170,vars:41,consts:[["stepper",""],["myButton",""],["dir","rtl",3,"selectionChange","linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["matInput","","formControlName","userName","required","","matTooltip","\u05D4\u05DB\u05E0\u05E1 \u05DE\u05D9\u05D9\u05DC- \u05D1\u05E9\u05D1\u05D9\u05DC \u05D4\u05DB\u05E0\u05D9\u05E1\u05D5\u05EA \u05D4\u05D1\u05D0\u05D5\u05EA","matTooltipPosition","right"],[4,"ngIf"],["matInput","","formControlName","password","required","","matTooltip","\u05D4\u05DB\u05E0\u05E1 \u05E1\u05D9\u05E1\u05DE\u05D0- \u05D1\u05E9\u05D1\u05D9\u05DC \u05D4\u05DB\u05E0\u05D9\u05E1\u05D5\u05EA \u05D4\u05D1\u05D0\u05D5\u05EA","matTooltipPosition","right",3,"type"],["matSuffix","",2,"cursor","pointer",3,"click"],["mat-button","",3,"click","disabled"],["matInput","","formControlName","last_Name",3,"input"],["matInput","","type","number","formControlName","connection",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","t_z",3,"input"],["matInput","","formControlName","birthDate","type","date",3,"input"],["formControlName","family_status",3,"selectionChange"],["matInput","","formControlName","number_of_people_in_house","type","number",3,"input"],["matInput","","formControlName","address","type","text",3,"input"],["formControlName","job_status",3,"selectionChange"],["matInput","","formControlName","work_business_name","type","text",3,"input"],["matInput","","formControlName","job_description","type","text",3,"input"],["matInput","","formControlName","avarage_monthly_salary","type","number",3,"input"],["matInput","","formControlName","years_in_current_position","type","number",3,"input"],["matInput","","formControlName","income_rent","type","number",3,"input"],["matInput","","formControlName","income_Government_Endorsement","type","number",3,"input"],["matInput","","formControlName","income_other","type","number",3,"input"],["matInput","","formControlName","expenses_rent","type","number",3,"input"],["matInput","","formControlName","expenses_loans","type","number",3,"input"],["matInput","","formControlName","expenses_other","type","number",3,"input"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext","",3,"click"],["matInput","","formControlName","property_city","type","text",3,"input"],["formControlName","transaction_type",3,"selectionChange"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","formControlName","estimated_price_by_customer","type","number",3,"input"],["matInput","","formControlName","estimated_price_by_sales_agreement","type","text",3,"input"],["formControlName","has_other_properties",3,"selectionChange"],["matInput","","formControlName","amount_of_loan_requested","type","number",3,"input"],["style","color: red;",4,"ngIf"],["mat-button","",3,"click"],["style","color: green;",4,"ngFor","ngForOf"],["style","color: red;",4,"ngFor","ngForOf"],[2,"color","green"],[2,"color","red"],[3,"value"],[3,"click","value"]],template:function(s,i){if(s&1){let m=R();r(0,"mat-horizontal-stepper",2,0),h("selectionChange",function(a){return c(m),_(i.onStepChange(a))}),r(2,"mat-step",3)(3,"form",4),f(4,ot,1,0,"ng-template",5),r(5,"mat-form-field")(6,"mat-label"),u(7,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC"),t(),$(8,"input",6),f(9,nt,2,0,"mat-error",7)(10,ut,2,0,"mat-error",7),t(),r(11,"mat-form-field")(12,"mat-label"),u(13,"\u05E1\u05D9\u05E1\u05DE\u05D0"),t(),$(14,"input",8),r(15,"mat-icon",9),h("click",function(){return c(m),_(i.hidePassword=!i.hidePassword)}),u(16),t(),f(17,at,2,0,"mat-error",7),t(),f(18,lt,6,2,"div",7),r(19,"div")(20,"button",10,1),h("click",function(){return c(m),_(i.checkUserNameAndPassword())}),u(22,"\u05D4\u05D1\u05D0"),t()()()(),r(23,"mat-step",3)(24,"form",4),f(25,pt,1,0,"ng-template",5),r(26,"mat-form-field")(27,"mat-label"),u(28,"\u05E9\u05DD \u05DE\u05E9\u05E4\u05D7\u05D4"),t(),r(29,"input",11),h("input",function(a){return c(m),_(i.onInputChange("last_Name",a))}),t(),f(30,dt,2,0,"mat-error",7)(31,Dt,2,0,"mat-error",7),t(),r(32,"mat-form-field")(33,"mat-label"),u(34,"\u05D7\u05D9\u05D1\u05D5\u05E8"),t(),r(35,"mat-select",12),h("selectionChange",function(a){return c(m),_(i.onSelectionChange("connection",a.value))}),f(36,ct,2,2,"mat-option",13),t()(),r(37,"mat-form-field")(38,"mat-label"),u(39,"\u05EA.\u05D6."),t(),r(40,"input",14),h("input",function(a){return c(m),_(i.onInputChange("t_z",a))}),t(),r(41,"mat-error"),u(42," \u05DE\u05E1\u05E4\u05E8 \u05EA\u05E2\u05D5\u05D3\u05EA \u05D6\u05D4\u05D5\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF "),t()(),r(43,"mat-form-field")(44,"mat-label"),u(45,"\u05EA\u05D0\u05E8\u05D9\u05DA \u05DC\u05D9\u05D3\u05D4"),t(),r(46,"input",15),h("input",function(a){return c(m),_(i.onInputChange("birthDate",a))}),t(),r(47,"mat-error"),u(48," \u05E0\u05D0 \u05DC\u05D4\u05DB\u05E0\u05D9\u05E1 \u05EA\u05D0\u05E8\u05D9\u05DA \u05EA\u05E7\u05D9\u05DF \u05E2\u05D3 \u05DC\u05EA\u05D0\u05E8\u05D9\u05DA \u05D4\u05E0\u05D5\u05DB\u05D7\u05D9 "),t()(),r(49,"mat-form-field")(50,"mat-label"),u(51,"\u05DE\u05E6\u05D1 \u05DE\u05E9\u05E4\u05D7\u05EA\u05D9"),t(),r(52,"mat-select",16),h("selectionChange",function(a){return c(m),_(i.onSelectionChange("family_status",a.value))}),f(53,_t,2,2,"mat-option",13),t()(),r(54,"mat-form-field")(55,"mat-label"),u(56,"\u05DE\u05E1\u05E4\u05E8 \u05D0\u05E0\u05E9\u05D9\u05DD \u05D1\u05D1\u05D9\u05EA"),t(),r(57,"input",17),h("input",function(a){return c(m),_(i.onInputChange("number_of_people_in_house",a))}),t(),f(58,ht,2,0,"mat-error",7),t(),r(59,"mat-form-field")(60,"mat-label"),u(61,"\u05DB\u05EA\u05D5\u05D1\u05EA"),t(),r(62,"input",18),h("input",function(a){return c(m),_(i.onInputChange("address",a))}),t(),f(63,ft,2,0,"mat-error",7),t(),r(64,"h3"),u(65,"\u05E4\u05E8\u05D8\u05D9 \u05EA\u05E2\u05E1\u05D5\u05E7\u05D4"),t(),r(66,"mat-form-field")(67,"mat-label"),u(68,"\u05E1\u05D8\u05D8\u05D5\u05E1"),t(),r(69,"mat-select",19),h("selectionChange",function(a){return c(m),_(i.onSelectionChange("job_status",a.value))}),f(70,Et,2,2,"mat-option",13),t()(),r(71,"mat-form-field")(72,"mat-label"),u(73,"\u05DE\u05E7\u05D5\u05DD \u05E2\u05D1\u05D5\u05D3\u05D4"),t(),r(74,"input",20),h("input",function(a){return c(m),_(i.onInputChange("work_business_name",a))}),t(),f(75,gt,2,0,"mat-error",7),t(),r(76,"mat-form-field")(77,"mat-label"),u(78,"\u05EA\u05E4\u05E7\u05D9\u05D3"),t(),r(79,"input",21),h("input",function(a){return c(m),_(i.onInputChange("job_description",a))}),t(),f(80,vt,2,0,"mat-error",7),t(),r(81,"mat-form-field")(82,"mat-label"),u(83,"\u05DE\u05E9\u05DB\u05D5\u05E8\u05EA \u05D7\u05D5\u05D3\u05E9\u05D9\u05EA \u05DE\u05DE\u05D5\u05E6\u05E2\u05EA \u05E0\u05D8\u05D5"),t(),r(84,"input",22),h("input",function(a){return c(m),_(i.onInputChange("avarage_monthly_salary",a))}),t(),f(85,St,2,0,"mat-error",7),t(),r(86,"mat-form-field")(87,"mat-label"),u(88,"\u05D5\u05EA\u05E7"),t(),r(89,"input",23),h("input",function(a){return c(m),_(i.onInputChange("years_in_current_position",a))}),t(),f(90,Ct,2,0,"mat-error",7),t(),r(91,"h3"),u(92,"\u05D4\u05DB\u05E0\u05E1\u05D5\u05EA"),t(),r(93,"mat-form-field")(94,"mat-label"),u(95,"\u05E7\u05E6\u05D1\u05D0\u05D5\u05EA"),t(),r(96,"input",24),h("input",function(a){return c(m),_(i.onInputChange("income_rent",a))}),t(),f(97,yt,2,0,"mat-error",7),t(),r(98,"mat-form-field")(99,"mat-label"),u(100,"\u05DE\u05D6\u05D5\u05E0\u05D5\u05EA"),t(),r(101,"input",25),h("input",function(a){return c(m),_(i.onInputChange("income_Government_Endorsement",a))}),t(),f(102,It,2,0,"mat-error",7),t(),r(103,"mat-form-field")(104,"mat-label"),u(105,"\u05DE\u05E7\u05D5\u05E8 \u05D0\u05D7\u05E8"),t(),r(106,"input",26),h("input",function(a){return c(m),_(i.onInputChange("income_other",a))}),t(),f(107,bt,2,0,"mat-error",7),t(),r(108,"h3"),u(109,"\u05D4\u05D5\u05E6\u05D0\u05D5\u05EA"),t(),r(110,"mat-form-field")(111,"mat-label"),u(112,"\u05E9\u05DB\u05E8 \u05D3\u05D9\u05E8\u05D4"),t(),r(113,"input",27),h("input",function(a){return c(m),_(i.onInputChange("expenses_rent",a))}),t(),f(114,wt,2,0,"mat-error",7),t(),r(115,"mat-form-field")(116,"mat-label"),u(117,"\u05D4\u05DC\u05D5\u05D5\u05D0\u05D5\u05EA"),t(),r(118,"input",28),h("input",function(a){return c(m),_(i.onInputChange("expenses_loans",a))}),t(),f(119,Ft,2,0,"mat-error",7),t(),r(120,"mat-form-field")(121,"mat-label"),u(122,"\u05DE\u05E7\u05D5\u05E8 \u05D0\u05D7\u05E8"),t(),r(123,"input",29),h("input",function(a){return c(m),_(i.onInputChange("expenses_other",a))}),t(),f(124,xt,2,0,"mat-error",7),t(),r(125,"div")(126,"button",30),u(127,"\u05D7\u05D6\u05D5\u05E8"),t(),r(128,"button",31),h("click",function(){return c(m),_(i.saveSecondStep())}),u(129,"\u05D4\u05D1\u05D0"),t()()()(),r(130,"mat-step",3)(131,"form",4),f(132,Gt,1,0,"ng-template",5),r(133,"mat-form-field")(134,"mat-label"),u(135,"\u05D9\u05D9\u05E9\u05D5\u05D1"),t(),r(136,"input",32),h("input",function(a){return c(m),_(i.onInputChange("property_city",a))}),t(),f(137,Nt,2,0,"mat-error",7),t(),r(138,"mat-form-field")(139,"mat-label"),u(140,"\u05E1\u05D5\u05D2 \u05E2\u05E1\u05E7\u05D4"),t(),r(141,"mat-select",33),h("selectionChange",function(a){return c(m),_(i.onSelectionChange("transaction_type",a.value))}),f(142,Vt,2,2,"mat-option",34),t()(),r(143,"mat-form-field")(144,"mat-label"),u(145,"\u05E9\u05D5\u05D5\u05D9 \u05D4\u05E0\u05DB\u05E1 \u05DC\u05E4\u05D9 \u05D4\u05E2\u05E8\u05DB\u05EA \u05DC\u05D5\u05D5\u05D4"),t(),r(146,"input",35),h("input",function(a){return c(m),_(i.onInputChange("estimated_price_by_customer",a))}),t(),f(147,Tt,2,0,"mat-error",7)(148,Lt,2,0,"mat-error",7),t(),r(149,"mat-form-field")(150,"mat-label"),u(151,"\u05E9\u05D5\u05D5\u05D4 \u05D4\u05E0\u05DB\u05E1 \u05DC\u05E4\u05D9 \u05D4\u05E1\u05DB\u05DD \u05DE\u05DB\u05E8"),t(),r(152,"input",36),h("input",function(a){return c(m),_(i.onInputChange("estimated_price_by_sales_agreement",a))}),t(),f(153,At,2,0,"mat-error",7)(154,Ot,2,0,"mat-error",7),t(),r(155,"mat-form-field")(156,"mat-label"),u(157,"\u05D9\u05E9 \u05E0\u05DB\u05E1\u05D9\u05DD \u05E0\u05D5\u05E1\u05E4\u05D9\u05DD \u05DC\u05DC\u05D5\u05D5\u05D4"),t(),r(158,"mat-select",37),h("selectionChange",function(a){return c(m),_(i.onSelectionChange("has_other_properties",a.value))}),f(159,qt,2,2,"mat-option",13),t()(),r(160,"mat-form-field")(161,"mat-label"),u(162,"\u05E1\u05DB\u05D5\u05DD \u05D4\u05D4\u05DC\u05D5\u05D5\u05D0\u05D4"),t(),r(163,"input",38),h("input",function(a){return c(m),_(i.onInputChange("amount_of_loan_requested",a))}),t(),f(164,kt,2,0,"mat-error",39),t(),r(165,"div")(166,"button",30),u(167,"\u05D7\u05D6\u05D5\u05E8"),t(),r(168,"button",40),h("click",function(){return c(m),_(i.save())}),u(169,"\u05E9\u05DC\u05D7 \u05E0\u05EA\u05D5\u05E0\u05D9\u05DD"),t()()()()()}if(s&2){let m,D,a,b,w,F,x,v,G,N,V,T,X,ee,te,re,ie,oe,ne,ue,ae,se,me,le;p("linear",i.isLinear),l(2),p("stepControl",i.firstFormGroup),l(),p("formGroup",i.firstFormGroup),l(6),p("ngIf",(m=i.firstFormGroup.get("userName"))==null?null:m.hasError("required")),l(),p("ngIf",(D=i.firstFormGroup.get("userName"))==null?null:D.hasError("email")),l(4),p("type",i.hidePassword?"password":"text"),l(),de("aria-label","Hide password")("aria-pressed",i.hidePassword),l(),q(" ",i.hidePassword?"visibility_off":"visibility"," "),l(),p("ngIf",(a=i.firstFormGroup.get("password"))==null?null:a.hasError("required")),l(),p("ngIf",(b=i.firstFormGroup.get("password"))==null?null:b.touched),l(2),p("disabled",i.firstFormGroup.invalid),l(3),p("stepControl",i.secondFormGroup),l(),p("formGroup",i.secondFormGroup),l(6),p("ngIf",(w=i.secondFormGroup.get("last_Name"))==null?null:w.hasError("required")),l(),p("ngIf",(F=i.secondFormGroup.get("last_Name"))==null?null:F.hasError("pattern")),l(5),p("ngForOf",i.connectionOptions),l(17),p("ngForOf",i.familyStatusOptions),l(5),p("ngIf",(x=i.secondFormGroup.get("number_of_people_in_house"))==null?null:x.hasError("required")),l(5),p("ngIf",(v=i.secondFormGroup.get("address"))==null?null:v.hasError("required")),l(7),p("ngForOf",i.jobStatusOptions),l(5),p("ngIf",(G=i.secondFormGroup.get("work_business_name"))==null?null:G.hasError("required")),l(5),p("ngIf",(N=i.secondFormGroup.get("job_description"))==null?null:N.hasError("required")),l(5),p("ngIf",(V=i.secondFormGroup.get("avarage_monthly_salary"))==null?null:V.hasError("required")),l(5),p("ngIf",(T=i.secondFormGroup.get("years_in_current_position"))==null?null:T.hasError("required")),l(7),p("ngIf",(X=i.secondFormGroup.get("income_rent"))==null?null:X.hasError("required")),l(5),p("ngIf",(ee=i.secondFormGroup.get("income_Government_Endorsement"))==null?null:ee.hasError("required")),l(5),p("ngIf",(te=i.secondFormGroup.get("income_other"))==null?null:te.hasError("required")),l(7),p("ngIf",(re=i.secondFormGroup.get("expenses_rent"))==null?null:re.hasError("required")),l(5),p("ngIf",(ie=i.secondFormGroup.get("expenses_loans"))==null?null:ie.hasError("required")),l(5),p("ngIf",(oe=i.secondFormGroup.get("expenses_other"))==null?null:oe.hasError("required")),l(6),p("stepControl",i.thirdFormGroup),l(),p("formGroup",i.thirdFormGroup),l(6),p("ngIf",(ne=i.thirdFormGroup.get("property_city"))==null?null:ne.hasError("required")),l(5),p("ngForOf",i.transactiontypeOptions),l(5),p("ngIf",(ue=i.thirdFormGroup.get("estimated_price_by_customer"))==null?null:ue.hasError("required")),l(),p("ngIf",(ae=i.thirdFormGroup.get("estimated_price_by_customer"))==null?null:ae.hasError("pattern")),l(5),p("ngIf",(se=i.thirdFormGroup.get("estimated_price_by_sales_agreement"))==null?null:se.hasError("required")),l(),p("ngIf",(me=i.thirdFormGroup.get("estimated_price_by_sales_agreement"))==null?null:me.hasError("pattern")),l(5),p("ngForOf",i.hasOtherProperties),l(5),p("ngIf",(le=i.thirdFormGroup.get("amount_of_loan_requested"))==null?null:le.hasError("required"))}},dependencies:[De,ce,he,Ne,Ae,Ve,Te,Le,Oe,Ge,Me,Be,je,Pe,$e,qe,fe,ke,Ce,Ee,ye,ge,ve,we,Ie,be],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}.invalid-requirement[_ngcontent-%COMP%]{color:red}.valid-requirement[_ngcontent-%COMP%]{color:green}mat-horizontal-stepper[_ngcontent-%COMP%]{width:50vw;margin:0 auto}#content[_ngcontent-%COMP%]{background-color:#ffffff9a;padding:25px;border-radius:40px;min-width:max-content;min-height:60vh}"]});let e=o;return e})();var Xe=(()=>{let o=class o{constructor(n,s,i){this.route=n,this.leadService=s,this.router=i,this.id=null,this.token=null,this.isNotValid=!1}ngOnInit(){console.log("in ngooninit of magic link"),this.route.queryParams.subscribe(n=>{this.id=n.id,this.token=n.token,console.log("ID:",this.id),console.log("Token:",this.token)}),this.id!=null&&this.leadService.checkToken(this.id).subscribe(n=>{n.status===200?this.router.navigate(["lead/lead",this?.id]):this.isNotValid=!0},n=>{console.error("Error checking token:",n),this.isNotValid=!0})}};o.\u0275fac=function(s){return new(s||o)(g(k),g(M),g(B))},o.\u0275cmp=A({type:o,selectors:[["app-magic-link"]],decls:2,vars:0,template:function(s,i){s&1&&(r(0,"p"),u(1,"magic-link works!"),t())}});let e=o;return e})();var Bt=[{path:"",component:K},{path:"lead/:id",component:K},{path:"magic-link",component:Xe}],et=(()=>{let o=class o{};o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=O({type:o}),o.\u0275inj=L({imports:[W.forChild(Bt),W]});let e=o;return e})();var Mr=(()=>{let o=class o{};o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=O({type:o}),o.\u0275inj=L({imports:[_e,Re,xe,et,Ze]});let e=o;return e})();export{Mr as a};
